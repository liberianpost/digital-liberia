import{u as L,S as C,d as S,j as e,a as r}from"./auth-e2397aa6.js";import{b as j,f as M,r as n}from"./react-b27cb0c5.js";import"./mui-e0995c82.js";const I=()=>{const i=j(),{studentId:m}=M(),{user:d}=L(),b=C.SCHOOL_ADMIN,[c,g]=n.useState(null),[a,x]=n.useState({name:"",grade:"",email:"",phone:"",address:""}),[w,h]=n.useState(!0),[l,p]=n.useState(!1),[s,f]=n.useState({});n.useEffect(()=>{!d||!S(b,d==null?void 0:d.securityLevel)?(alert("Access denied. Requires SCHOOL ADMIN privileges."),i("/moe/dashboard",{replace:!0})):(h(!0),api.get(`/students/${m}`).then(t=>{g(t.data),x({name:t.data.name,grade:t.data.grade,email:t.data.email,phone:t.data.phone,address:t.data.address}),h(!1)}).catch(t=>{console.error("Error fetching student:",t),alert("Failed to load student profile."),i(-1),h(!1)}))},[d,m,i]);const N=()=>{const t={};return a.name||(t.name="Full Name is required"),a.grade||(t.grade="Grade is required"),(!a.email||!/\S+@\S+\.\S+/.test(a.email))&&(t.email="Valid email is required"),a.phone||(t.phone="Phone number is required"),a.address||(t.address="Address is required"),f(t),Object.keys(t).length===0},o=t=>{const{name:v,value:k}=t.target;x(u=>({...u,[v]:k})),f(u=>({...u,[v]:""}))},y=async()=>{if(N())try{await api.put(`/students/${m}`,a),g({...c,...a}),p(!1),alert("Profile updated successfully.")}catch(t){console.error("Error updating student:",t),alert("Failed to update student profile.")}};return w?e("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e("div",{className:"w-4/5 bg-gray-200 rounded-full h-2",children:e("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"50%"}})})}):c?r("div",{className:"min-h-screen bg-gray-50",children:[e("div",{className:"bg-white text-black p-4 shadow-md border-b border-gray-200",children:r("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[r("div",{className:"flex items-center",children:[e("button",{onClick:()=>i(-1),className:"mr-4 text-black","aria-label":"Go back",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e("h1",{className:"text-xl font-bold",children:"Student Profile"})]}),r("button",{onClick:l?y:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md flex items-center hover:bg-blue-700 transition-colors",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),l?"Save":"Edit"]})]})}),r("div",{className:"p-4 max-w-7xl mx-auto",children:[e("div",{className:"flex flex-col items-center mb-6",children:e("img",{src:c.profileImage||"https://via.placeholder.com/120?text=Profile",alt:"Student profile",className:"w-32 h-32 rounded-full mb-2 object-cover",onError:t=>{console.error("Failed to load profile image"),t.target.src="https://via.placeholder.com/120?text=Profile"}})}),r("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[e("h2",{className:"text-lg font-bold text-gray-800",children:"Basic Information"}),e("hr",{className:"my-2"}),r("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Full Name"}),r("div",{className:"mt-1 flex items-center border border-gray-300 rounded-md px-3 py-2",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e("input",{type:"text",name:"name",value:a.name,onChange:o,disabled:!l,className:"flex-1 outline-none bg-transparent"})]}),s.name&&e("p",{className:"text-red-500 text-xs mt-1",children:s.name})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Grade"}),r("div",{className:"mt-1 flex items-center border border-gray-300 rounded-md px-3 py-2",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})}),e("input",{type:"text",name:"grade",value:a.grade,onChange:o,disabled:!l,className:"flex-1 outline-none bg-transparent"})]}),s.grade&&e("p",{className:"text-red-500 text-xs mt-1",children:s.grade})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Student ID"}),r("div",{className:"mt-1 flex items-center border border-gray-300 rounded-md px-3 py-2",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})}),e("input",{type:"text",value:c.id,disabled:!0,className:"flex-1 outline-none bg-transparent text-gray-500"})]})]})]})]}),r("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e("h2",{className:"text-lg font-bold text-gray-800",children:"Contact Information"}),e("hr",{className:"my-2"}),r("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Email"}),r("div",{className:"mt-1 flex items-center border border-gray-300 rounded-md px-3 py-2",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})}),e("input",{type:"email",name:"email",value:a.email,onChange:o,disabled:!l,className:"flex-1 outline-none bg-transparent"})]}),s.email&&e("p",{className:"text-red-500 text-xs mt-1",children:s.email})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Phone"}),r("div",{className:"mt-1 flex items-center border border-gray-300 rounded-md px-3 py-2",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m-2.5 7.5h10M3 9h12m-4 8H3m8.5-5.5a3.5 3.5 0 11-7 0 3.5 3.5 0 017 0z"})}),e("input",{type:"tel",name:"phone",value:a.phone,onChange:o,disabled:!l,className:"flex-1 outline-none bg-transparent"})]}),s.phone&&e("p",{className:"text-red-500 text-xs mt-1",children:s.phone})]}),r("div",{className:"sm:col-span-2",children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Address"}),r("div",{className:"mt-1 flex items-start border border-gray-300 rounded-md px-3 py-2",children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e("textarea",{name:"address",value:a.address,onChange:o,disabled:!l,rows:2,className:"flex-1 outline-none bg-transparent"})]}),s.address&&e("p",{className:"text-red-500 text-xs mt-1",children:s.address})]})]})]})]})]}):null};export{I as default};
//# sourceMappingURL=StudentProfile-c94a4f11.js.map
