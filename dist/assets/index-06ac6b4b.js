var I=Object.defineProperty;var T=(o,n,t)=>n in o?I(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var x=(o,n,t)=>(T(o,typeof n!="symbol"?n+"":n,t),t);import{j as e,a as s,u as C,A as k}from"./auth-e2397aa6.js";import{a as M,u as R,r as f,L as _,b as V,c as P,d as c,N as j,e as q,B as A}from"./react-b27cb0c5.js";import{a as F,C as Y}from"./mui-e0995c82.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}})();var O,S=M;O=S.createRoot,S.hydrateRoot;const H="modulepreload",$=function(o){return"/"+o},D={},d=function(n,t,i){if(!t||t.length===0)return n();const l=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=$(r),r in D)return;D[r]=!0;const a=r.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(!!i)for(let g=l.length-1;g>=0;g--){const b=l[g];if(b.href===r&&(!a||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${u}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":H,a||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),a)return new Promise((g,b)=>{h.addEventListener("load",g),h.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>n()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};function E(){return e("div",{className:"flex justify-center items-center h-screen",children:e("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}const B=()=>{const o=R(),[n,t]=f.useState(0),[i,l]=f.useState(!1),r=["/logos/liberianpost.png","/logos/digital.png","/logos/libmusic.png","/logos/libconnectsit.png","/logos/libpaysit.png","/logos/seal_of_liberia.png","/logos/liberia.png"],a=[{label:"Home",to:"/",color:"bg-blue-500/80"},{label:"System",to:"/system",color:"bg-green-500/80"},{label:"Digital Liberia",to:"/digital-liberia",color:"bg-purple-500/80"},{label:"LibPay",to:"/libpay",color:"bg-yellow-500/80"},{label:"Liberian Post",to:"/liberian-post",color:"bg-pink-500/80"}];return f.useEffect(()=>{(async()=>{const h=r.map(g=>new Promise((b,pe)=>{const y=new Image;y.src=g,y.onload=b,y.onerror=()=>{console.error(`Failed to load logo: ${g}`),b()}}));await Promise.all(h),l(!0)})();const w=setInterval(()=>{t(h=>(h+1)%r.length)},3e3);return()=>clearInterval(w)},[]),i?s("div",{className:"relative min-h-screen w-full bg-blue-950 text-white font-inter overflow-x-hidden",children:[e("header",{className:"fixed top-0 left-0 w-full z-50 bg-blue-950/80 backdrop-blur-md border-b border-blue-700/30",children:e("div",{className:"flex flex-col items-center",children:e("nav",{className:"flex space-x-2 md:space-x-4 p-4 overflow-x-auto w-full justify-center",children:a.map(u=>e(_,{to:u.to,className:`flex-shrink-0 px-4 py-2 rounded-lg transition-colors ${u.color} ${o.pathname===u.to?"ring-2 ring-white shadow-lg":"hover:opacity-90"}`,children:e("span",{className:"font-bold text-white",children:u.label})},u.to))})})}),e("main",{className:"pt-24 pb-12 px-4",children:s("div",{className:"max-w-6xl mx-auto",children:[s("section",{className:"text-center py-12",children:[e("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Welcome to Digital Liberia"}),e("p",{className:"text-xl max-w-3xl mx-auto",children:"Transforming Liberia through digital innovation and connectivity"})]}),e("div",{className:"my-12",children:e("div",{className:"flex justify-center",children:e("img",{src:r[n],alt:"Digital Liberia Partner Logo",className:"h-32 object-contain",onError:u=>{u.target.src="/placeholder-logo.png"}})})}),s("section",{className:"my-12 bg-blue-900/20 p-8 rounded-xl backdrop-blur-sm",children:[e("h2",{className:"text-2xl font-bold mb-4",children:"Our Ecosystem"}),s("div",{className:"grid md:grid-cols-2 gap-8",children:[s("div",{className:"bg-white/5 p-6 rounded-lg",children:[e("h3",{className:"text-xl font-semibold mb-3",children:"National Database"}),e("p",{children:"Secure, centralized data management for all government services"}),e(_,{to:"/system",className:"inline-block mt-4 px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",children:"Learn More"})]}),s("div",{className:"bg-white/5 p-6 rounded-lg",children:[e("h3",{className:"text-xl font-semibold mb-3",children:"LibPay"}),e("p",{children:"Liberia's premier digital payment solution"}),e(_,{to:"/libpay",className:"inline-block mt-4 px-4 py-2 bg-yellow-600 rounded hover:bg-yellow-700",children:"Discover LibPay"})]})]})]})]})}),e("footer",{className:"py-6 text-center text-white/70 border-t border-blue-800",children:e("div",{className:"container mx-auto px-4",children:s("p",{children:["Â© ",new Date().getFullYear()," Digital Liberia. All rights reserved."]})})})]}):e(E,{})},z=({children:o,requiredLevel:n})=>{const{user:t,isAuthenticated:i,loading:l}=C(),r=V(),a=R();return f.useEffect(()=>{!l&&!i&&(console.warn("Auth redirect triggered",{path:a.pathname,authenticated:i,user:t}),r("/system",{state:{from:a},replace:!0}))},[l,i,r,a]),l||!i?null:n&&(t==null?void 0:t.securityLevel)<n?s("div",{className:"p-8 text-center",children:[e("h1",{className:"text-xl font-bold text-red-600",children:"Access Denied"}),e("p",{children:"You don't have permission to view this page"})]}):o};function m(o,n){return P.lazy(async()=>{console.log(`ðŸŒ€ Attempting to load module: ${n}`);try{const t=await o();return t!=null&&t.default?(console.log(`âœ… Successfully loaded module: ${n}`),t):(console.error(`ðŸš¨ Module "${n}" has no default export`,t),{default:()=>s("div",{className:"p-4 text-red-600",children:[s("p",{children:["Component ",e("strong",{children:n})," is missing a default export"]}),e("button",{onClick:()=>window.location.reload(),className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded",children:"Reload"})]})})}catch(t){return console.error(`ðŸ”¥ Failed to load "${n}"`,t),{default:()=>s("div",{className:"p-4 text-red-600",children:[s("p",{children:["Failed to load ",e("strong",{children:n})]}),e("pre",{className:"text-xs mt-2 p-2 bg-gray-100 overflow-x-auto",children:t.message}),e("button",{onClick:()=>window.location.reload(),className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded",children:"Retry"})]})}}})}const U=m(()=>d(()=>import("./System-93dff205.js"),["assets/System-93dff205.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"System"),W=m(()=>d(()=>import("./Dssn-215b12c4.js"),["assets/Dssn-215b12c4.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"Dssn"),J=m(()=>d(()=>import("./Libpay-33f15a95.js"),["assets/Libpay-33f15a95.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"Libpay"),G=m(()=>d(()=>import("./Digitalliberia-27449eba.js"),["assets/Digitalliberia-27449eba.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"Digitalliberia"),K=m(()=>d(()=>import("./MoeDashboard-c551d51e.js"),["assets/MoeDashboard-c551d51e.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"MoeDashboard"),Q=m(()=>d(()=>import("./SchoolManagement-c681aa7b.js"),["assets/SchoolManagement-c681aa7b.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"SchoolManagement"),X=m(()=>d(()=>import("./StudentProfile-c94a4f11.js"),["assets/StudentProfile-c94a4f11.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"StudentProfile"),Z=m(()=>d(()=>import("./SystemSettings-a7638694.js"),["assets/SystemSettings-a7638694.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"SystemSettings"),ee=m(()=>d(()=>import("./StudentRecords-3618dc63.js"),["assets/StudentRecords-3618dc63.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"StudentRecords"),te=m(()=>d(()=>import("./TeacherManagement-81522583.js"),["assets/TeacherManagement-81522583.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"TeacherManagement"),re=m(()=>d(()=>import("./Reports-cbc7599b.js"),["assets/Reports-cbc7599b.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"Reports"),oe=m(()=>d(()=>import("./ClassManagement-39b2204e.js"),["assets/ClassManagement-39b2204e.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"ClassManagement"),ne=m(()=>d(()=>import("./DistrictReports-08ca3189.js"),["assets/DistrictReports-08ca3189.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"DistrictReports"),le=m(()=>d(()=>import("./DatabaseTools-3fd4f527.js"),["assets/DatabaseTools-3fd4f527.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"DatabaseTools"),ie=m(()=>d(()=>import("./UserManagement-c0d1d592.js"),["assets/UserManagement-c0d1d592.js","assets/auth-e2397aa6.js","assets/mui-e0995c82.js","assets/react-b27cb0c5.js"]),"UserManagement"),p=({children:o,requiredLevel:n})=>e(z,{requiredLevel:n,children:e(f.Suspense,{fallback:e(E,{}),children:o})}),v=({children:o})=>e(f.Suspense,{fallback:e(E,{}),children:o}),se=()=>s(q,{children:[e(c,{path:"/",element:e(B,{})}),e(c,{path:"/system",element:e(v,{children:e(U,{})})}),e(c,{path:"/dssn",element:e(v,{children:e(W,{})})}),e(c,{path:"/libpay",element:e(v,{children:e(J,{})})}),e(c,{path:"/digital-liberia",element:e(v,{children:e(G,{})})}),e(c,{path:"/liberian-post",element:e("div",{className:"p-4",children:"LiberianPost (Coming Soon)"})}),e(c,{path:"/moe/dashboard",element:e(p,{requiredLevel:SecurityLevels.MINISTRY_EMPLOYEE,children:e(K,{})})}),e(c,{path:"/moe/school-management",element:e(p,{requiredLevel:SecurityLevels.SCHOOL_ADMIN,children:e(Q,{})})}),e(c,{path:"/moe/student-profile/:studentId",element:e(p,{requiredLevel:SecurityLevels.SCHOOL_ADMIN,children:e(X,{})})}),e(c,{path:"/moe/student-records",element:e(p,{requiredLevel:SecurityLevels.SCHOOL_ADMIN,children:e(ee,{})})}),e(c,{path:"/moe/teacher-management",element:e(p,{requiredLevel:SecurityLevels.SCHOOL_ADMIN,children:e(te,{})})}),e(c,{path:"/moe/reports",element:e(p,{requiredLevel:SecurityLevels.MINISTRY_EMPLOYEE,children:e(re,{})})}),e(c,{path:"/moe/system-settings",element:e(p,{requiredLevel:SecurityLevels.SYSTEM_ADMIN,children:e(Z,{})})}),e(c,{path:"/moe/class-management",element:e(p,{requiredLevel:SecurityLevels.SCHOOL_ADMIN,children:e(oe,{})})}),e(c,{path:"/moe/district-reports",element:e(p,{requiredLevel:SecurityLevels.MINISTRY_EMPLOYEE,children:e(ne,{})})}),e(c,{path:"/moe/database-tools",element:e(p,{requiredLevel:SecurityLevels.SYSTEM_ADMIN,children:e(le,{})})}),e(c,{path:"/moe/user-management",element:e(p,{requiredLevel:SecurityLevels.SYSTEM_ADMIN,children:e(ie,{})})}),e(c,{path:"/404",element:e("div",{className:"min-h-screen flex items-center justify-center",children:s("div",{className:"text-center p-8 max-w-md",children:[e("h1",{className:"text-2xl font-bold mb-4",children:"Page Not Found"}),e("button",{onClick:()=>window.location.href="/",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return Home"})]})})}),e(c,{path:"*",element:e(j,{to:"/404",replace:!0})})]});class ae extends f.Component{constructor(){super(...arguments);x(this,"state",{error:null,errorInfo:null,errorCount:0,lastErrorTime:null});x(this,"handleReset",()=>{console.log("ErrorBoundary reset triggered"),this.setState({error:null,errorInfo:null,errorCount:0})})}static getDerivedStateFromError(t){const i={message:t.message,name:t.name,stack:t.stack,time:new Date().toISOString()};return console.group("APP ERROR BOUNDARY CAUGHT"),console.error("Error:",t),console.log("Error Details:",i),console.groupEnd(),{error:t,errorCount:1,lastErrorTime:new Date().toISOString()}}componentDidCatch(t,i){console.group("COMPONENT ERROR DETAILS"),console.error("Error:",t),console.log("Component Stack:",i.componentStack),console.log("Current State:",this.state),console.groupEnd();const l=new Date,r=this.state.lastErrorTime?new Date(this.state.lastErrorTime):null;(r?(l-r)/1e3:1/0)>5&&this.setState(u=>({errorInfo:i,errorCount:u.errorCount+1,lastErrorTime:l.toISOString()})),window.trackJs&&window.trackJs.track(t)}renderFallback(){const{error:t,errorInfo:i}=this.state;return e("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:s("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-2xl w-full",children:[e("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:(t==null?void 0:t.name)||"Application Error"}),s("div",{className:"mb-4 space-y-4",children:[s("div",{children:[e("h2",{className:"font-semibold mb-1",children:"Error Message:"}),e("div",{className:"bg-gray-100 p-3 rounded font-mono text-sm",children:(t==null?void 0:t.message)||"No error message available"})]}),(t==null?void 0:t.stack)&&s("div",{children:[e("h2",{className:"font-semibold mb-1",children:"Stack Trace:"}),e("pre",{className:"text-xs bg-gray-100 p-3 rounded overflow-x-auto",children:t.stack})]}),(i==null?void 0:i.componentStack)&&s("div",{children:[e("h2",{className:"font-semibold mb-1",children:"Component Stack:"}),e("pre",{className:"text-xs bg-gray-100 p-3 rounded overflow-x-auto",children:i.componentStack})]})]}),s("div",{className:"flex gap-4 mt-6",children:[e("button",{onClick:this.handleReset,className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Try Again"}),e("button",{onClick:()=>{console.log("Full page reload initiated"),window.location.reload()},className:"flex-1 py-3 px-4 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Reload Page"})]})]})})}render(){return this.state.error?this.renderFallback():this.props.children}}const ce=({children:o})=>(console.log("[Debug] AuthProvider mounting"),e(k,{children:o})),de=({children:o})=>(console.log("[Debug] Router mounting"),e(A,{children:o})),me=()=>(console.group("App Component"),console.log("App mounting"),console.log("Current environment:","production"),console.groupEnd(),e(ae,{children:e(de,{children:e(ce,{children:e(se,{})})})}));const L=document.createElement("link");L.href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css";L.rel="stylesheet";document.head.appendChild(L);const ue=F({key:"css",prepend:!0,speedy:!1}),N=document.getElementById("root");if(!N){const o=document.createElement("div");throw o.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #fff;
    color: #dc2626;
    font-family: sans-serif;
    padding: 2rem;
    text-align: center;
    z-index: 9999;
  `,o.innerHTML=`
    <div>
      <h1 style="font-size: 1.5rem; margin-bottom: 1rem;">
        Critical Error: Root element not found
      </h1>
      <p>Please check your index.html file for an element with id="root"</p>
    </div>
  `,document.body.appendChild(o),new Error("Root element not found")}const he=O(N);try{he.render(e(P.StrictMode,{children:e(Y,{value:ue,children:e(A,{children:e(me,{})})})}))}catch(o){console.error("Root render failed:",o),N.innerHTML=`
    <div style="padding: 2rem; text-align: center; color: #dc2626;">
      <h1 style="font-size: 1.5rem; margin-bottom: 1rem;">
        Application Failed to Load
      </h1>
      <p style="margin-bottom: 1rem;">${o.message}</p>
      <button 
        onclick="window.location.reload()" 
        style="padding: 0.5rem 1rem; background: #2563eb; color: white; border: none; border-radius: 0.25rem;"
      >
        Try Again
      </button>
    </div>
  `}
//# sourceMappingURL=index-06ac6b4b.js.map
