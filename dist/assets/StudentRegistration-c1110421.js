import{b as f,u as x,S as b,r as c,i as N,c as a,j as e,k as v}from"./index-31cf902e.js";const C=()=>{const i=f(),{user:d}=x(),u=b.SCHOOL_ADMIN,[t,h]=c.useState({fullName:"",dateOfBirth:"",gender:"",grade:"",parentName:"",parentContact:""}),[n,m]=c.useState({});c.useEffect(()=>{(!d||!N(u,d==null?void 0:d.securityLevel))&&(alert("Access denied. Requires SCHOOL ADMIN privileges."),i("/moe/dashboard",{replace:!0}))},[d,i]);const s=r=>{const{name:l,value:p}=r.target;h(o=>({...o,[l]:p})),m(o=>({...o,[l]:""}))},g=()=>{const r={};return t.fullName||(r.fullName="Full Name is required"),t.dateOfBirth||(r.dateOfBirth="Date of Birth is required"),t.gender||(r.gender="Gender is required"),t.grade||(r.grade="Grade is required"),t.parentName||(r.parentName="Parent Name is required"),(!t.parentContact||!/^\+\d{10,}$/.test(t.parentContact))&&(r.parentContact="Valid phone number is required (e.g., +1234567890)"),m(r),Object.keys(r).length===0};return a("div",{className:"min-h-screen bg-gray-50",children:[e("div",{className:"bg-white text-black p-4 shadow-md border-b border-gray-200",children:e("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:a("div",{className:"flex items-center",children:[e("button",{onClick:()=>i(-1),className:"mr-4 text-black","aria-label":"Go back",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e("h1",{className:"text-xl font-bold",children:"Student Registration"})]})})}),e("div",{className:"p-4 max-w-7xl mx-auto",children:e("form",{onSubmit:async r=>{if(r.preventDefault(),!!g())try{await v.post("/students/register",t),alert("Student registered successfully."),i(-1)}catch(l){console.error("Error registering student:",l),alert("Failed to register student.")}},className:"bg-white rounded-lg shadow-md p-6",children:a("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Full Name"}),e("input",{type:"text",name:"fullName",value:t.fullName,onChange:s,className:"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500",required:!0}),n.fullName&&e("p",{className:"text-red-500 text-xs mt-1",children:n.fullName})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Date of Birth"}),e("input",{type:"date",name:"dateOfBirth",value:t.dateOfBirth,onChange:s,className:"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500",required:!0}),n.dateOfBirth&&e("p",{className:"text-red-500 text-xs mt-1",children:n.dateOfBirth})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Gender"}),a("select",{name:"gender",value:t.gender,onChange:s,className:"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e("option",{value:"",children:"Select Gender"}),e("option",{value:"Male",children:"Male"}),e("option",{value:"Female",children:"Female"}),e("option",{value:"Other",children:"Other"})]}),n.gender&&e("p",{className:"text-red-500 text-xs mt-1",children:n.gender})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Grade"}),a("select",{name:"grade",value:t.grade,onChange:s,className:"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e("option",{value:"",children:"Select Grade"}),Array.from({length:12},(r,l)=>a("option",{value:`Grade ${l+1}`,children:["Grade ",l+1]},l+1))]}),n.grade&&e("p",{className:"text-red-500 text-xs mt-1",children:n.grade})]}),e("div",{className:"sm:col-span-2",children:e("h2",{className:"text-lg font-bold text-gray-800 mt-4",children:"Parent/Guardian Information"})}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Parent Name"}),e("input",{type:"text",name:"parentName",value:t.parentName,onChange:s,className:"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500",required:!0}),n.parentName&&e("p",{className:"text-red-500 text-xs mt-1",children:n.parentName})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-600",children:"Parent Contact"}),e("input",{type:"tel",name:"parentContact",value:t.parentContact,onChange:s,className:"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500",required:!0}),n.parentContact&&e("p",{className:"text-red-500 text-xs mt-1",children:n.parentContact})]}),e("div",{className:"sm:col-span-2 mt-4",children:a("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-md flex items-center justify-center hover:bg-blue-700 transition-colors",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Register Student"]})})]})})})]})};export{C as default};
