var k=Object.defineProperty;var M=(t,a,l)=>a in t?k(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;var y=(t,a,l)=>(M(t,typeof a!="symbol"?a+"":a,l),l);import{u as N,a as C,b as S,r as d,j as e,L as j,h as D}from"./index-CwYS-J06.js";class E extends d.Component{constructor(){super(...arguments);y(this,"state",{error:null})}static getDerivedStateFromError(l){return console.error("ErrorBoundary caught:",l,l.stack),{error:l}}render(){return this.state.error?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-900",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something Went Wrong"}),e.jsx("p",{className:"text-red-600 mb-6",children:this.state.error.message||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const z=[{label:"Home",to:"/",color:"bg-blue-500/80"},{label:"System",to:"/system",color:"bg-green-500/80"},{label:"Digital Liberia",to:"/digital-liberia",color:"bg-purple-500/80"},{label:"LibPay",to:"/libpay",color:"bg-yellow-500/80"},{label:"Liberian Post",to:"/liberian-post",color:"bg-pink-500/80"}],v=[{src:"/logos/liberianpost.png",alt:"Liberian Post"},{src:"/logos/digital.png",alt:"Digital Liberia"},{src:"/logos/libmusic.png",alt:"LibMusic"},{src:"/logos/libconnectsit.png",alt:"LibConnect"},{src:"/logos/libpaysit.png",alt:"LibPay"},{src:"/logos/seal-of-liberia.png",alt:"Seal of Liberia"},{src:"/logos/liberia.png",alt:"Liberia"}],w=[{id:"education",name:"Ministry of Education",description:"School management, student records, and educational resources",icon:"/logos/moe.png"},{id:"health",name:"Ministry of Health",description:"Health records, vaccination data, and medical services",icon:"/logos/moh.png"},{id:"finance",name:"Ministry of Finance",description:"Tax records, financial services, and economic data",icon:"/logos/mof.png"},{id:"justice",name:"Ministry of Justice",description:"Legal documents, court records, and law enforcement",icon:"/logos/moj.png"},{id:"transport",name:"Ministry of Transport",description:"Driver licenses, vehicle registration, and transport permits",icon:"/logos/mot.png"},{id:"foreign",name:"Ministry of Foreign Affairs",description:"Passport services and international relations",icon:"/logos/mofa.png"},{id:"agriculture",name:"Ministry of Agriculture",description:"Farming permits, agricultural data, and food security",icon:"/logos/moa.png"},{id:"internal",name:"Ministry of Internal Affairs",description:"Citizen IDs, birth certificates, and local governance",icon:"/logos/moia.png"},{id:"lands",name:"Ministry of Lands & Mines",description:"Land deeds, mining permits, and property records",icon:"/logos/mol.png"},{id:"commerce",name:"Ministry of Commerce",description:"Business registration and trade licenses",icon:"/logos/moc.png"},{id:"labour",name:"Ministry of Labour",description:"Employment records and worker rights",icon:"/logos/moll.png"},{id:"youth",name:"Ministry of Youth & Sports",description:"Youth programs and sporting events",icon:"/logos/moy.png"}],A=[{id:"passport",name:"Passport"},{id:"birth-certificate",name:"Birth Certificate"},{id:"drivers-license",name:"Driver's License"},{id:"citizen-id",name:"Citizen ID"},{id:"business-registration",name:"Business Registration"},{id:"vehicle-registration",name:"Vehicle Registration"},{id:"land-deed",name:"Land Deed"},{id:"tax-services",name:"Tax Services"}],F=({onClose:t})=>{const{login:a}=N(),l=S(),[n,m]=d.useState({username:"",password:""}),[c,u]=d.useState({username:"",password:""}),[h,x]=d.useState(""),[g,p]=d.useState(!1),b=i=>{const{name:o,value:L}=i.target;m(f=>({...f,[o]:L})),c[o]&&u(f=>({...f,[o]:""}))},s=()=>{const i={username:"",password:""};let o=!0;return n.username.trim()||(i.username="Username is required",o=!1),n.password||(i.password="Password is required",o=!1),u(i),o},r=async i=>{if(i.preventDefault(),x(""),!!s()){p(!0);try{const o=await a(n,l);o.success?setShowMoeLogin(!1):x(o.error||"Invalid username or password")}catch(o){console.error("Login error:",o),x("Network error. Please check your connection.")}finally{p(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md overflow-hidden shadow-xl",children:[e.jsxs("div",{className:"bg-blue-600 p-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Ministry of Education"}),e.jsx("button",{onClick:t,className:"text-white text-2xl hover:text-gray-200",children:"×"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:"/logos/moe.png",alt:"MOE Logo",className:"w-20 h-20 object-contain",onError:i=>{console.error("Failed to load MOE logo"),i.target.src="https://via.placeholder.com/80?text=MOE"}})}),h&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:h}),e.jsxs("form",{onSubmit:r,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-900 mb-2 font-medium",children:"Username"}),e.jsx("input",{type:"text",name:"username",value:n.username,onChange:b,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 ${c.username?"border-red-500":"border-gray-300"}`,placeholder:"Enter your username",required:!0,autoFocus:!0}),c.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.username})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-900 mb-2 font-medium",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:n.password,onChange:b,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900 ${c.password?"border-red-500":"border-gray-300"}`,placeholder:"Enter your password",required:!0}),c.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.password})]}),e.jsx("button",{type:"submit",disabled:g,className:`w-full py-3 px-4 rounded-md text-white font-semibold ${g?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} transition-colors flex items-center justify-center`,children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Login"})]}),e.jsxs("div",{className:"mt-4 flex justify-center space-x-4 text-sm border-t border-gray-200 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>alert("Forgot password feature coming soon"),className:"text-blue-600 hover:text-blue-800 hover:underline font-medium",children:"Forgot Password?"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("button",{type:"button",onClick:()=>alert("Registration feature coming soon"),className:"text-blue-600 hover:text-blue-800 hover:underline font-medium",children:"Create Account"})]})]})]})})},I=()=>{const{user:t,loading:a,logout:l}=N(),n=C(),m=S(),[c,u]=d.useState(0),[h,x]=d.useState(!1);d.useEffect(()=>{console.log("System.jsx - Auth context:",{user:t,isAuthenticated:!!t,loading:a,location:n.pathname})},[t,a,n.pathname]),d.useEffect(()=>{const s=setInterval(()=>{u(r=>(r+1)%v.length)},2e3);return()=>clearInterval(s)},[]),d.useEffect(()=>{if(a)return;const s=!!localStorage.getItem("moeAuth");if(s&&t&&t.securityLevel){console.log("System.jsx - Navigating with user:",t);const r=getDefaultRouteForLevel(t.securityLevel);(n.pathname==="/system"||n.pathname==="/")&&m(r,{replace:!0})}else!t&&s&&(console.log("System.jsx - Invalid user in localStorage, clearing"),localStorage.removeItem("moeAuth"))},[t,a,m,n.pathname]);const g=(s,r)=>{var i;r.stopPropagation(),console.log("System.jsx - Ministry clicked:",s),s==="education"?t?D(t,m):x(!0):alert(`Services for ${(i=w.find(o=>o.id===s))==null?void 0:i.name} are coming soon`)},p=(s,r)=>{r.stopPropagation(),console.log("System.jsx - Service clicked:",s),alert(`${s.replace("-"," ")} service will be available soon`)},b=()=>{console.log("System.jsx - Logging out user:",t),l(),m("/system",{replace:!0})};return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-900",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-gray-900",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Loading..."})]})}):e.jsx(E,{children:e.jsxs("div",{className:"relative min-h-screen w-full bg-gray-100 text-gray-900 font-inter overflow-x-hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-100 -z-50"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-10 pointer-events-none",children:e.jsx("div",{className:"relative w-full max-w-2xl mx-4 h-64 md:h-96 flex items-center justify-center",children:v.map((s,r)=>e.jsxs("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-1000 ${r===c?"opacity-100":"opacity-0"}`,children:[e.jsx("img",{src:s.src,alt:s.alt,className:"max-w-full max-h-full object-contain",onError:i=>{console.error(`Failed to load logo: ${s.src}`),i.target.src=`https://via.placeholder.com/200?text=${s.alt}`}}),e.jsx("div",{className:"absolute inset-0 bg-gray-200/5"})]},r))})}),e.jsx("header",{className:"fixed top-0 left-0 w-full z-50",children:e.jsxs("div",{className:"bg-gray-100/80 backdrop-blur-md border-b border-gray-300/30",children:[e.jsx("div",{className:"flex items-center justify-center px-4 py-4 max-w-7xl mx-auto",children:e.jsx("nav",{className:"flex space-x-2 md:space-x-4 overflow-x-auto w-full justify-center",children:z.map(s=>e.jsx("div",{className:`flex-shrink-0 ${s.color} px-3 py-1 rounded-lg`,children:e.jsx(j,{to:s.to,className:`text-sm md:text-base lg:text-lg font-bold transition-colors duration-300 ${n.pathname===s.to?"text-red-500":"text-gray-900 hover:text-blue-600"}`,children:s.label})},s.to))})}),e.jsx("div",{className:"w-full bg-gradient-to-b from-gray-100 to-transparent overflow-x-auto",children:e.jsx("div",{className:"flex flex-nowrap px-4 space-x-4 w-max max-w-full mx-auto py-3",children:v.map((s,r)=>e.jsx("div",{className:`flex-shrink-0 flex items-center justify-center p-2 rounded-lg transition-all duration-300 ${r===c?"scale-110 bg-white shadow-lg":"scale-100 bg-white/90"}`,children:e.jsx("img",{src:s.src,alt:s.alt,className:"w-12 h-12 md:w-16 md:h-16 object-contain",onError:i=>{console.error(`Failed to load logo: ${s.src}`),i.target.src=`https://via.placeholder.com/64?text=${s.alt}`}})},r))})})]})}),e.jsxs("main",{className:"relative z-30 pt-48 pb-20 px-4 md:px-8",children:[e.jsx("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:e.jsx("div",{className:"bg-glass rounded-xl p-6 md:p-8 shadow-lg relative overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-gray-900 border-b border-gray-300 pb-2",children:"Digital Social Security Number (DSSN)"}),e.jsxs("div",{className:"text-gray-900 space-y-4",children:[e.jsx("p",{children:"In the Digital Liberia project, the DSSN (Digital Social Security Number) is a unique digital identifier assigned to every Liberian citizen or legal resident within the system."}),e.jsx(j,{to:"/dssn",className:"inline-flex items-center bg-blue-500/80 backdrop-blur-sm rounded-lg px-3 py-1 ml-2 border border-blue-400/30 cursor-pointer hover:bg-blue-600/80 transition-colors",children:"(click here to verify a DSSN)"})]})]})})}),e.jsx("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:e.jsx("div",{className:"bg-glass rounded-xl p-6 md:p-8 shadow-lg relative overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-gray-900 border-b border-gray-300 pb-2",children:"Digital Liberia System"}),e.jsx("div",{className:"text-gray-900",children:e.jsx("p",{children:"The National Database Management System (NDMS) is the secure, centralized, and intelligent national data backbone that powers Digital Liberia."})})]})})}),e.jsx("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:e.jsx("div",{className:"bg-glass rounded-xl p-6 md:p-8 shadow-lg relative overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-gray-900 border-b border-gray-300 pb-2",children:"Government Ministries"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(s=>e.jsx("div",{onClick:r=>g(s.id,r),className:"cursor-pointer bg-white/5 hover:bg-white/10 transition-colors p-4 rounded-lg border border-gray-200 backdrop-blur-sm relative z-20",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.icon,alt:s.name,className:"w-12 h-12 object-contain",onError:r=>{console.error(`Failed to load icon: ${s.icon}`),r.target.src=`https://via.placeholder.com/48?text=${s.name}`}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-700",children:s.description})]})]})},s.id))})]})})}),e.jsx("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:e.jsx("div",{className:"bg-glass rounded-xl p-6 md:p-8 shadow-lg relative overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-gray-900 border-b border-gray-300 pb-2",children:"Quick Access Services"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(s=>e.jsx("button",{onClick:r=>p(s.id,r),className:"bg-white/5 hover:bg-white/10 transition-colors p-4 rounded-lg border border-gray-200 backdrop-blur-sm text-left",children:e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name})},s.id))})]})})})]}),e.jsx("footer",{className:"relative z-30 py-6 text-center text-gray-600 text-sm",children:e.jsxs("div",{className:"border-t border-gray-300 pt-6",children:["© ",new Date().getFullYear()," Digital Liberia. All rights reserved."]})}),h&&e.jsx("div",{className:"fixed inset-0 z-50",children:e.jsx(F,{onClose:()=>x(!1)})}),t&&e.jsx("div",{className:"fixed top-4 right-4 z-50",children:e.jsx("button",{onClick:b,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Logout"})})]})})};export{I as default};
