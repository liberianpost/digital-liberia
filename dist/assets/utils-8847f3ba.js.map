{"version":3,"file":"utils-8847f3ba.js","sources":["../../src/utils/dashboardManager.js","../../src/utils/auth.js"],"sourcesContent":["import { DashboardItems } from '@config/dashboardItems';\nimport { SecurityLevels } from './auth';\n\nconst defaultRoutes = {\n  [SecurityLevels.STUDENT]: '/moe/student-profile',\n  [SecurityLevels.PARENT]: '/moe/student-reports',\n  [SecurityLevels.TEACHER]: '/moe/class-management',\n  [SecurityLevels.SCHOOL_ADMIN]: '/moe/school-management',\n  [SecurityLevels.MINISTRY_OFFICIAL]: '/moe/district-reports',\n  [SecurityLevels.DATABASE_ADMIN]: '/moe/database-tools',\n  [SecurityLevels.SYSTEM_ADMIN]: '/moe/system-settings',\n};\n\nexport function getDefaultRouteForLevel(securityLevel) {\n  return defaultRoutes[securityLevel] || '/moe/dashboard';\n}\n\nexport function getAvailableDashboardItems(securityLevel) {\n  const currentLevel = securityLevel || SecurityLevels.STUDENT;\n  return DashboardItems.filter((item) => {\n    const levels = Object.values(SecurityLevels);\n    const requiredIndex = levels.indexOf(item.requiredLevel);\n    const userIndex = levels.indexOf(currentLevel);\n    return userIndex >= requiredIndex;\n  });\n}\n","import { getDefaultRouteForLevel } from './dashboardManager';\n\nexport const SecurityLevels = {\n  STUDENT: 'STUDENT',\n  PARENT: 'PARENT',\n  TEACHER: 'TEACHER',\n  SCHOOL_ADMIN: 'SCHOOL_ADMIN',\n  MINISTRY_OFFICIAL: 'MINISTRY_OFFICIAL',\n  DATABASE_ADMIN: 'DATABASE_ADMIN',\n  SYSTEM_ADMIN: 'SYSTEM_ADMIN',\n};\n\n// Get current user's security level\nexport function getCurrentSecurityLevel() {\n  const user = JSON.parse(localStorage.getItem('moeAuth') || 'null');\n  return user?.securityLevel || SecurityLevels.STUDENT;\n}\n\n// Check if user has required permission\nexport function hasPermission(requiredLevel, userLevel = getCurrentSecurityLevel()) {\n  const levels = Object.values(SecurityLevels);\n  const requiredIndex = levels.indexOf(requiredLevel);\n  const userIndex = levels.indexOf(userLevel);\n  console.log('hasPermission:', { requiredLevel, userLevel, hasAccess: userIndex >= requiredIndex });\n  return userIndex >= requiredIndex;\n}\n\n// Get role name for display\nexport function getRoleName(level) {\n  const roles = {\n    [SecurityLevels.STUDENT]: 'Student',\n    [SecurityLevels.PARENT]: 'Parent',\n    [SecurityLevels.TEACHER]: 'Teacher',\n    [SecurityLevels.SCHOOL_ADMIN]: 'School Admin',\n    [SecurityLevels.MINISTRY_OFFICIAL]: 'Ministry Official',\n    [SecurityLevels.DATABASE_ADMIN]: 'Database Admin',\n    [SecurityLevels.SYSTEM_ADMIN]: 'System Admin',\n  };\n  return roles[level] || 'Unknown Role';\n}\n\n// Handle login success and redirect to default route\nexport function handleLoginSuccess(userData, navigate) {\n  console.log('handleLoginSuccess:', userData);\n  localStorage.setItem('moeAuth', JSON.stringify(userData));\n  const defaultRoute = getDefaultRouteForLevel(userData.securityLevel);\n  navigate(defaultRoute, { replace: true });\n}\n"],"names":["defaultRoutes","SecurityLevels","STUDENT","PARENT","TEACHER","SCHOOL_ADMIN","MINISTRY_OFFICIAL","DATABASE_ADMIN","SYSTEM_ADMIN","getDefaultRouteForLevel","securityLevel","getAvailableDashboardItems","currentLevel","DashboardItems","filter","item","levels","Object","values","requiredIndex","indexOf","requiredLevel","getCurrentSecurityLevel","user","JSON","parse","localStorage","getItem","hasPermission","userLevel","userIndex","console","log","hasAccess","getRoleName","level","roles","handleLoginSuccess","userData","navigate","setItem","stringify","defaultRoute","replace"],"mappings":"yCAGA,MAAMA,EAAgB,CACpB,CAACC,EAAeC,OAAO,EAAG,uBAC1B,CAACD,EAAeE,MAAM,EAAG,uBACzB,CAACF,EAAeG,OAAO,EAAG,wBAC1B,CAACH,EAAeI,YAAY,EAAG,yBAC/B,CAACJ,EAAeK,iBAAiB,EAAG,wBACpC,CAACL,EAAeM,cAAc,EAAG,sBACjC,CAACN,EAAeO,YAAY,EAAG,sBACjC,EAEO,SAASC,EAAwBC,EAAe,CAC9CV,OAAAA,EAAcU,CAAa,GAAK,gBACzC,CAEO,SAASC,EAA2BD,EAAe,CAClDE,MAAAA,EAAeF,GAAiBT,EAAeC,QAC9CW,OAAAA,EAAeC,OAAiBC,GAAA,CAC/BC,MAAAA,EAASC,OAAOC,OAAOjB,CAAc,EACrCkB,EAAgBH,EAAOI,QAAQL,EAAKM,aAAa,EAEvD,OADkBL,EAAOI,QAAQR,CAAY,GACzBO,CAAAA,CACrB,CACH,CCvBO,MAAMlB,EAAiB,CAC5BC,QAAS,UACTC,OAAQ,SACRC,QAAS,UACTC,aAAc,eACdC,kBAAmB,oBACnBC,eAAgB,iBAChBC,aAAc,cAChB,EAGO,SAASc,GAA0B,CAEjCC,OADMC,KAAKC,MAAMC,aAAaC,QAAQ,SAAS,GAAK,MAAM,GACpDjB,eAAiBT,EAAeC,OAC/C,CAGO,SAAS0B,EAAcP,EAAeQ,EAAYP,IAA2B,CAC5EN,MAAAA,EAASC,OAAOC,OAAOjB,CAAc,EACrCkB,EAAgBH,EAAOI,QAAQC,CAAa,EAC5CS,EAAYd,EAAOI,QAAQS,CAAS,EAC1CE,eAAQC,IAAI,iBAAkB,CAAEX,cAAAA,EAAeQ,UAAAA,EAAWI,UAAWH,GAAaX,CAAAA,CAAe,EAC1FW,GAAaX,CACtB,CAGO,SAASe,EAAYC,EAAO,CAU1BC,MATO,CACZ,CAACnC,EAAeC,OAAO,EAAG,UAC1B,CAACD,EAAeE,MAAM,EAAG,SACzB,CAACF,EAAeG,OAAO,EAAG,UAC1B,CAACH,EAAeI,YAAY,EAAG,eAC/B,CAACJ,EAAeK,iBAAiB,EAAG,oBACpC,CAACL,EAAeM,cAAc,EAAG,iBACjC,CAACN,EAAeO,YAAY,EAAG,cAAA,EAEpB2B,CAAK,GAAK,cACzB,CAGgBE,SAAAA,EAAmBC,EAAUC,EAAU,CAC7CP,QAAAA,IAAI,sBAAuBM,CAAQ,EAC3CZ,aAAac,QAAQ,UAAWhB,KAAKiB,UAAUH,CAAQ,CAAC,EAClDI,MAAAA,EAAejC,EAAwB6B,EAAS5B,aAAa,EACnE6B,EAASG,EAAc,CAAEC,QAAS,EAAA,CAAM,CAC1C"}