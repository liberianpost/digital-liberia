{"version":3,"file":"UserManagement-ef19ae02.js","sources":["../../src/components/UserManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@context/AuthContext';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\nimport api from '../api';\n\nconst UserManagement = () => {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.SYSTEM_ADMIN;\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires SYSTEM ADMIN privileges.');\n      navigate('/moe/dashboard', { replace: true });\n    } else {\n      setLoading(true);\n      api.get('/users')\n        .then(response => {\n          setUsers(response.data);\n          setLoading(false);\n        })\n        .catch(error => {\n          console.error('Error fetching users:', error);\n          alert('Failed to load user records.');\n          setLoading(false);\n        });\n    }\n  }, [user, navigate]);\n\n  const handleAddUser = () => {\n    navigate('/moe/add-user');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"w-4/5 bg-gray-200 rounded-full h-2\">\n          <div className=\"bg-blue-600 h-2 rounded-full animate-pulse\" style={{ width: '50%' }}></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4 relative\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"bg-white shadow-md p-4 flex items-center justify-between border-b border-gray-200\">\n          <button\n            onClick={() => navigate('/moe/dashboard')}\n            className=\"text-gray-800 hover:text-gray-600\"\n            aria-label=\"Go back\"\n          >\n            <svg\n              className=\"w-6 h-6\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n              />\n            </svg>\n          </button>\n          <h1 className=\"text-xl font-bold text-gray-800\">User Management</h1>\n          <div className=\"w-6\" />\n        </div>\n\n        <div className=\"mt-4 space-y-4\">\n          {users.length === 0 ? (\n            <p className=\"text-gray-500 text-center\">No users available.</p>\n          ) : (\n            users.map((user) => (\n              <div\n                key={user.id}\n                className=\"bg-white rounded-lg shadow-md p-4 flex items-center hover:bg-gray-50 transition-colors\"\n                onClick={() => navigate(`/moe/user-details/${user.id}`)}\n              >\n                <img\n                  src={user.icon || '/logos/user.png'}\n                  alt={user.name}\n                  className=\"w-12 h-12 mr-4 object-contain rounded-full\"\n                  onError={(e) => {\n                    e.target.src = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"gray\"%3E%3Cpath d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z\"/%3E%3C/svg%3E';\n                  }}\n                />\n                <div>\n                  <h2 className=\"text-base font-bold text-gray-800\">{user.name}</h2>\n                  <p className=\"text-sm text-gray-600\">{user.role}</p>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        <button\n          onClick={handleAddUser}\n          className=\"fixed bottom-4 right-4 bg-blue-600 text-white rounded-full p-4 shadow-lg hover:bg-blue-700 transition-colors\"\n          aria-label=\"Add user\"\n        >\n          <svg\n            className=\"w-6 h-6\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              d=\"M12 4v16m8-8H4\"\n            />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default UserManagement;\n"],"names":["UserManagement","navigate","useNavigate","user","useAuth","REQUIRED_SECURITY_LEVEL","SecurityLevels","SYSTEM_ADMIN","users","setUsers","useState","loading","setLoading","useEffect","hasPermission","securityLevel","alert","replace","api","get","then","response","data","catch","error","handleAddUser","jsx","width","jsxs","length","map","id","icon","name","e","target","src","role"],"mappings":"mJAOA,MAAMA,EAAiBA,IAAM,CAC3B,MAAMC,EAAWC,IACX,CAAEC,KAAAA,GAASC,EAAQ,EACnBC,EAA0BC,EAAeC,aACzC,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,CAAE,CAAA,EAC/B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EAE3CG,EAAAA,UAAU,IAAM,CACV,CAACV,GAAQ,CAACW,EAAcT,EAAyBF,GAAAA,YAAAA,EAAMY,aAAa,GACtEC,MAAM,kDAAkD,EACxDf,EAAS,iBAAkB,CAAEgB,QAAS,EAAA,CAAM,IAE5CL,EAAW,EAAI,EACfM,EAAIC,IAAI,QAAQ,EACbC,KAAiBC,GAAA,CAChBZ,EAASY,EAASC,IAAI,EACtBV,EAAW,EAAK,CAAA,CACjB,EACAW,MAAeC,GAAA,CACNA,QAAAA,MAAM,wBAAyBA,CAAK,EAC5CR,MAAM,8BAA8B,EACpCJ,EAAW,EAAK,CAAA,CACjB,EACL,EACC,CAACT,EAAMF,CAAQ,CAAC,EAEnB,MAAMwB,EAAgBA,IAAM,CAC1BxB,EAAS,eAAe,CAAA,EAG1B,OAAIU,EAECe,EAAA,MAAA,CAAI,UAAU,2DACb,SAACA,EAAA,MAAA,CAAI,UAAU,qCACb,SAACA,EAAA,MAAA,CAAI,UAAU,6CAA6C,MAAO,CAAEC,MAAO,KAAA,EAAS,EACvF,CACF,CAAA,IAKD,MAAI,CAAA,UAAU,uCACb,SAACC,EAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACA,EAAA,MAAA,CAAI,UAAU,oFACb,SAAA,CAAAF,EAAC,SACC,CAAA,QAAS,IAAMzB,EAAS,gBAAgB,EACxC,UAAU,oCACV,aAAW,UAEX,SAAAyB,EAAC,MACC,CAAA,UAAU,UACV,KAAK,OACL,OAAO,eACP,QAAQ,YACR,MAAM,6BAEN,WAAC,OACC,CAAA,cAAc,QACd,eAAe,QACf,YAAY,IACZ,EAAE,6BAA6B,CAAA,CAEnC,CAAA,EACF,EACCA,EAAA,KAAA,CAAG,UAAU,kCAAkC,SAAe,kBAAA,EAC/DA,EAAC,MAAI,CAAA,UAAU,KAAK,CAAA,CAAA,EACtB,EAECA,EAAA,MAAA,CAAI,UAAU,iBACZlB,SAAMqB,EAAAA,SAAW,EAChBH,EAAC,IAAE,CAAA,UAAU,4BAA4B,SAAA,sBAAmB,EAE5DlB,EAAMsB,IAAK3B,GACTyB,EAAC,MAEC,CAAA,UAAU,yFACV,QAAS,IAAM3B,EAAS,qBAAqBE,EAAK4B,EAAE,EAAE,EAEtD,SAAA,CAACL,EAAA,MAAA,CACC,IAAKvB,EAAK6B,MAAQ,kBAClB,IAAK7B,EAAK8B,KACV,UAAU,6CACV,QAAgBC,GAAA,CACdA,EAAEC,OAAOC,IAAM,iRAAA,EACf,IAEH,MACC,CAAA,SAAA,CAAAV,EAAC,KAAG,CAAA,UAAU,oCAAqCvB,SAAAA,EAAK8B,KAAK,IAC5D,IAAE,CAAA,UAAU,wBAAyB9B,SAAAA,EAAKkC,KAAK,CAAA,EAClD,CAfKlC,CAAAA,EAAAA,EAAK4B,EAgBZ,CACD,EAEL,EAECL,EAAA,SAAA,CACC,QAASD,EACT,UAAU,+GACV,aAAW,WAEX,SAACC,EAAA,MAAA,CACC,UAAU,UACV,KAAK,OACL,OAAO,eACP,QAAQ,YACR,MAAM,6BAEN,SAAAA,EAAC,QACC,cAAc,QACd,eAAe,QACf,YAAY,IACZ,EAAE,gBAAgB,CAAA,CAEtB,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ"}