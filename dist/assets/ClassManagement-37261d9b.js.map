{"version":3,"file":"ClassManagement-37261d9b.js","sources":["../../src/components/ClassManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@context/AuthContext';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\nimport api from '../api';\n\nconst TabPanel = ({ children, value, index }) => {\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`class-tabpanel-${index}`}\n      aria-labelledby={`class-tab-${index}`}\n      className=\"p-4\"\n    >\n      {value === index && children}\n    </div>\n  );\n};\n\nconst ClassManagement = () => {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.SCHOOL_ADMIN;\n  const [tabValue, setTabValue] = useState(0);\n  const [classes, setClasses] = useState([]);\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires SCHOOL ADMIN privileges.');\n      navigate(-1);\n    } else {\n      api.get('/classes')\n        .then(response => setClasses(response.data))\n        .catch(error => {\n          console.error('Error fetching classes:', error);\n          alert('Failed to load classes.');\n        });\n    }\n  }, [user, navigate]);\n\n  const handleTabChange = (newValue) => {\n    setTabValue(newValue);\n  };\n\n  const handleAddClass = () => {\n    navigate('/moe/add-class');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Toolbar */}\n      <div className=\"bg-white text-black p-4 shadow-md border-b border-gray-200\">\n        <div className=\"flex items-center justify-between max-w-7xl mx-auto\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"mr-4 text-black\"\n              aria-label=\"Go back\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                />\n              </svg>\n            </button>\n            <h1 className=\"text-xl font-bold\">Class Management</h1>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"flex overflow-x-auto\">\n            <button\n              onClick={() => handleTabChange(0)}\n              className={`px-4 py-2 text-sm font-medium ${tabValue === 0 ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-600'}`}\n            >\n              All Classes\n            </button>\n            <button\n              onClick={() => handleTabChange(1)}\n              className={`px-4 py-2 text-sm font-medium ${tabValue === 1 ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-600'}`}\n            >\n              By Grade\n            </button>\n            <button\n              onClick={() => handleTabChange(2)}\n              className={`px-4 py-2 text-sm font-medium ${tabValue === 2 ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-600'}`}\n            >\n              By Teacher\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Tab Content */}\n      <div className=\"p-4 max-w-7xl mx-auto\">\n        <TabPanel value={tabValue} index={0}>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n            {classes.length === 0 ? (\n              <p className=\"text-gray-500 text-center col-span-full\">No classes available.</p>\n            ) : (\n              classes.map(cls => (\n                <div\n                  key={cls.id}\n                  className=\"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow\"\n                >\n                  <div className=\"flex items-center mb-2\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      className=\"h-6 w-6 text-blue-600 mr-2\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z\"\n                      />\n                    </svg>\n                    <h3 className=\"text-lg font-bold\">{cls.name}</h3>\n                  </div>\n                  <p className=\"text-sm text-gray-600\">Teacher: {cls.teacher}</p>\n                  <p className=\"text-sm text-gray-600\">Students: {cls.studentCount}</p>\n                </div>\n              ))\n            )}\n          </div>\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={1}>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <h2 className=\"text-lg font-bold mb-2\">Classes by Grade</h2>\n            <ul className=\"space-y-2\">\n              {['Grade 7', 'Grade 8', 'Grade 9', 'Grade 10', 'Grade 11', 'Grade 12'].map(grade => (\n                <li\n                  key={grade}\n                  onClick={() => navigate(`/moe/classes/grade/${grade.toLowerCase()}`)}\n                  className=\"flex justify-between items-center p-2 hover:bg-gray-100 rounded-md cursor-pointer\"\n                >\n                  <span>{grade}</span>\n                  <span className=\"text-sm text-gray-600\">{Math.floor(Math.random() * 5) + 1} classes</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={2}>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <h2 className=\"text-lg font-bold mb-2\">Classes by Teacher</h2>\n            <ul className=\"space-y-2\">\n              {['Mr. Johnson', 'Ms. Williams', 'Dr. Smith', 'Mrs. Brown'].map(teacher => (\n                <li\n                  key={teacher}\n                  onClick={() => navigate(`/moe/classes/teacher/${teacher.toLowerCase().replace(' ', '-')}`)}\n                  className=\"flex justify-between items-center p-2 hover:bg-gray-100 rounded-md cursor-pointer\"\n                >\n                  <span>{teacher}</span>\n                  <span className=\"text-sm text-gray-600\">{Math.floor(Math.random() * 3) + 1} classes</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </TabPanel>\n      </div>\n\n      {/* Add Class Button */}\n      <button\n        onClick={handleAddClass}\n        className=\"fixed bottom-4 right-4 bg-blue-600 text-white rounded-full p-3 shadow-lg hover:bg-blue-700\"\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          className=\"h-6 w-6\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M12 4v16m8-8H4\"\n          />\n        </svg>\n      </button>\n    </div>\n  );\n};\n\nexport default ClassManagement;\n"],"names":["TabPanel","children","value","index","ClassManagement","navigate","useNavigate","user","useAuth","REQUIRED_SECURITY_LEVEL","SecurityLevels","SCHOOL_ADMIN","tabValue","setTabValue","useState","classes","setClasses","useEffect","hasPermission","securityLevel","alert","get","then","response","data","catch","error","handleTabChange","newValue","handleAddClass","jsxs","jsx","length","map","cls","name","teacher","studentCount","id","grade","toLowerCase","Math","floor","random","replace"],"mappings":"8IAOA,MAAMA,EAAWA,CAAC,CAAEC,SAAAA,EAAUC,MAAAA,EAAOC,MAAAA,CAAM,MAEtC,MACC,CAAA,KAAK,WACL,OAAQD,IAAUC,EAClB,GAAI,kBAAkBA,CAAK,GAC3B,kBAAiB,aAAaA,CAAK,GACnC,UAAU,MAETD,SAAAA,IAAUC,GAASF,CACtB,CAAA,EAIEG,EAAkBA,IAAM,CAC5B,MAAMC,EAAWC,IACX,CAAEC,KAAAA,GAASC,EAAQ,EACnBC,EAA0BC,EAAeC,aACzC,CAACC,EAAUC,CAAW,EAAIC,WAAS,CAAC,EACpC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,CAAE,CAAA,EAEzCG,EAAAA,UAAU,IAAM,CACV,CAACV,GAAQ,CAACW,EAAcT,EAAyBF,GAAAA,YAAAA,EAAMY,aAAa,GACtEC,MAAM,kDAAkD,EACxDf,EAAS,EAAE,GAEPgB,EAAAA,IAAI,UAAU,EACfC,KAAKC,GAAYP,EAAWO,EAASC,IAAI,CAAC,EAC1CC,MAAeC,GAAA,CACNA,QAAAA,MAAM,0BAA2BA,CAAK,EAC9CN,MAAM,yBAAyB,CAAA,CAChC,CACL,EACC,CAACb,EAAMF,CAAQ,CAAC,EAEnB,MAAMsB,EAAgCC,GAAA,CACpCf,EAAYe,CAAQ,CAAA,EAGhBC,EAAiBA,IAAM,CAC3BxB,EAAS,gBAAgB,CAAA,EAIzB,OAAAyB,EAAC,MAAI,CAAA,UAAU,0BAEb,SAAA,CAACC,EAAA,MAAA,CAAI,UAAU,6DACb,SAACA,EAAA,MAAA,CAAI,UAAU,sDACb,SAAAD,EAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAC,EAAC,SACC,CAAA,QAAS,IAAM1B,EAAS,EAAE,EAC1B,UAAU,kBACV,aAAW,UAEX,SAAA0B,EAAC,MACC,CAAA,MAAM,6BACN,UAAU,UACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,WAAC,OACC,CAAA,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,6BAA6B,CAAA,CAEnC,CAAA,EACF,EACCA,EAAA,KAAA,CAAG,UAAU,oBAAoB,SAAgB,mBAAA,CAAA,CACpD,CAAA,CACF,CAAA,EACF,EAGAA,EAAC,MAAI,CAAA,UAAU,oCACb,SAAAA,EAAC,MAAI,CAAA,UAAU,oBACb,SAAAD,EAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAAAC,EAAC,SACC,CAAA,QAAS,IAAMJ,EAAgB,CAAC,EAChC,UAAW,iCAAiCf,IAAa,EAAI,2CAA6C,eAAe,GAAG,SAG9H,cAAA,EACCmB,EAAA,SAAA,CACC,QAAS,IAAMJ,EAAgB,CAAC,EAChC,UAAW,iCAAiCf,IAAa,EAAI,2CAA6C,eAAe,GAAG,SAG9H,WAAA,EACCmB,EAAA,SAAA,CACC,QAAS,IAAMJ,EAAgB,CAAC,EAChC,UAAW,iCAAiCf,IAAa,EAAI,2CAA6C,eAAe,GAAG,SAG9H,aAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGAkB,EAAC,MAAI,CAAA,UAAU,wBACb,SAAA,CAACC,EAAA/B,EAAA,CAAS,MAAOY,EAAU,MAAO,EAChC,WAAC,MAAI,CAAA,UAAU,uDACZG,SAAAA,EAAQiB,SAAW,IACjB,IAAE,CAAA,UAAU,0CAA0C,SAAA,uBAAqB,CAAA,EAE5EjB,EAAQkB,IACNC,GAAAJ,EAAC,MAEC,CAAA,UAAU,sEAEV,SAAA,CAACA,EAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAACC,EAAA,MAAA,CACC,MAAM,6BACN,UAAU,6BACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,SAACA,EAAA,OAAA,CACC,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,oKAAA,CAAoK,CAE1K,CAAA,EACCA,EAAA,KAAA,CAAG,UAAU,oBAAqBG,WAAIC,KAAK,CAAA,EAC9C,EACAL,EAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,YAAUI,EAAIE,OAAAA,EAAQ,EAC3DN,EAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,aAAWI,EAAIG,YAAAA,EAAa,CAAA,CAAA,EArB5DH,EAAII,EAsBX,CACD,CAAA,CAEL,CACF,CAAA,EAEAP,EAAC/B,GAAS,MAAOY,EAAU,MAAO,EAChC,SAAAkB,EAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACC,EAAA,KAAA,CAAG,UAAU,yBAAyB,SAAgB,mBAAA,EACvDA,EAAC,KAAG,CAAA,UAAU,YACX,SAAA,CAAC,UAAW,UAAW,UAAW,WAAY,WAAY,UAAU,EAAEE,OACpEH,EAAA,KAAA,CAEC,QAAS,IAAMzB,EAAS,sBAAsBkC,EAAMC,YAAa,CAAA,EAAE,EACnE,UAAU,oFAEV,SAAA,CAAAT,EAAC,QAAMQ,SAAMA,CAAA,CAAA,EACbT,EAAC,OAAK,CAAA,UAAU,wBAAyBW,SAAAA,CAAAA,KAAKC,MAAMD,KAAKE,OAAO,EAAI,CAAC,EAAI,EAAE,UAAA,EAAQ,CAAA,GAL9EJ,CAMP,CACD,EACH,CAAA,CAAA,CACF,CACF,CAAA,EAEAR,EAAC/B,GAAS,MAAOY,EAAU,MAAO,EAChC,SAAAkB,EAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACC,EAAA,KAAA,CAAG,UAAU,yBAAyB,SAAkB,qBAAA,EACxDA,EAAA,KAAA,CAAG,UAAU,YACX,SAAC,CAAA,cAAe,eAAgB,YAAa,YAAY,EAAEE,IAAIG,GAC7DN,EAAA,KAAA,CAEC,QAAS,IAAMzB,EAAS,wBAAwB+B,EAAQI,YAAAA,EAAcI,QAAQ,IAAK,GAAG,CAAC,EAAE,EACzF,UAAU,oFAEV,SAAA,CAAAb,EAAC,QAAMK,SAAQA,CAAA,CAAA,EACfN,EAAC,OAAK,CAAA,UAAU,wBAAyBW,SAAAA,CAAAA,KAAKC,MAAMD,KAAKE,OAAO,EAAI,CAAC,EAAI,EAAE,UAAA,EAAQ,CAAA,GAL9EP,CAMP,CACD,EACH,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,EAGCL,EAAA,SAAA,CACC,QAASF,EACT,UAAU,6FAEV,SAACE,EAAA,MAAA,CACC,MAAM,6BACN,UAAU,UACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,SAACA,EAAA,OAAA,CACC,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,gBAAgB,CAAA,CAEtB,CAAA,EACF,CACF,CAAA,CAAA,CAEJ"}