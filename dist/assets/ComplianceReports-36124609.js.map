{"version":3,"file":"ComplianceReports-36124609.js","sources":["../../src/components/ComplianceReports.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@context/AuthContext';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\nimport api from '../api';\n\nconst ComplianceReports = () => {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.DATABASE_ADMIN;\n  const [complianceData, setComplianceData] = useState([]);\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires DATABASE ADMIN privileges.');\n      navigate(-1);\n    } else {\n      api.get('/compliance-reports')\n        .then(response => setComplianceData(response.data))\n        .catch(error => {\n          console.error('Error fetching compliance data:', error);\n          alert('Failed to load compliance reports.');\n        });\n    }\n  }, [user, navigate]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-4\">\n      {/* Header */}\n      <div className=\"flex items-center mb-4\">\n        <button\n          onClick={() => navigate(-1)}\n          className=\"mr-4 text-black flex items-center\"\n          aria-label=\"Go back\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-6 w-6\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n            />\n          </svg>\n          <span className=\"ml-2\">Back</span>\n        </button>\n        <h1 className=\"text-2xl font-bold\">Compliance Reports</h1>\n      </div>\n      <hr className=\"mb-4\" />\n\n      {/* Compliance Summary Cards */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n        {complianceData.length === 0 ? (\n          <p className=\"text-gray-500 text-center col-span-full\">No compliance data available.</p>\n        ) : (\n          complianceData.map((item, index) => (\n            <div\n              key={index}\n              className=\"bg-white rounded-lg shadow-md p-4\"\n            >\n              <h2 className=\"text-lg font-bold\">{item.category}</h2>\n              <p\n                className={`text-3xl font-bold ${\n                  item.complianceRate >= 90 ? 'text-green-600' :\n                  item.complianceRate >= 75 ? 'text-yellow-600' : 'text-red-600'\n                }`}\n              >\n                {item.complianceRate}%\n              </p>\n              <p className=\"text-sm text-gray-600\">Compliance Rate</p>\n              <div className=\"mt-2\">\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                  <div\n                    className={`h-2 rounded-full ${\n                      item.complianceRate >= 90 ? 'bg-green-600' :\n                      item.complianceRate >= 75 ? 'bg-yellow-600' : 'bg-red-600'\n                    }`}\n                    style={{ width: `${item.complianceRate}%` }}\n                  ></div>\n                </div>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  {item.compliantSchools} compliant â€¢ {item.nonCompliantSchools} non-compliant\n                </p>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Detailed Compliance Section */}\n      <div className=\"bg-white rounded-lg shadow-md p-4 mb-4\">\n        <h2 className=\"text-xl font-bold mb-2\">Detailed Compliance Overview</h2>\n        <p className=\"text-gray-600 mb-4\">\n          This section would display detailed compliance metrics, trends over time, \n          and comparison between different regions or school types.\n        </p>\n        <div className=\"h-64 flex items-center justify-center bg-gray-100 rounded-md\">\n          <p className=\"text-gray-500\">Compliance visualization charts would appear here</p>\n        </div>\n      </div>\n\n      {/* Non-Compliance Breakdown */}\n      <div className=\"bg-white rounded-lg shadow-md p-4\">\n        <h2 className=\"text-xl font-bold mb-2\">Non-Compliance Breakdown</h2>\n        <p className=\"text-gray-600 mb-4\">\n          Analysis of common reasons for non-compliance and recommended actions.\n        </p>\n        <div className=\"h-48 flex items-center justify-center bg-gray-100 rounded-md\">\n          <p className=\"text-gray-500\">Non-compliance analysis would appear here</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ComplianceReports;\n"],"names":["ComplianceReports","navigate","useNavigate","user","useAuth","REQUIRED_SECURITY_LEVEL","SecurityLevels","DATABASE_ADMIN","complianceData","setComplianceData","useState","useEffect","hasPermission","securityLevel","alert","get","then","response","data","catch","error","jsxs","jsx","length","map","item","index","category","complianceRate","width","compliantSchools","nonCompliantSchools"],"mappings":"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"}