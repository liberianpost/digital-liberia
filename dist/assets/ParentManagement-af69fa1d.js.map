{"version":3,"file":"ParentManagement-af69fa1d.js","sources":["../../src/components/ParentManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@context/AuthContext';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\nimport api from '../api';\n\nconst ParentManagement = () => {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.SCHOOL_ADMIN;\n  const [parents, setParents] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires SCHOOL ADMIN privileges.');\n      navigate(-1);\n    } else {\n      setLoading(true);\n      api.get('/parents')\n        .then(response => {\n          setParents(response.data);\n          setLoading(false);\n        })\n        .catch(error => {\n          console.error('Error fetching parents:', error);\n          alert('Failed to load parents.');\n          setLoading(false);\n        });\n    }\n  }, [user, navigate]);\n\n  const handleParentClick = (parentId) => {\n    navigate(`/moe/parent-details/${parentId}`);\n  };\n\n  const handleAddParent = () => {\n    navigate('/moe/add-parent');\n  };\n\n  const handleBack = () => {\n    navigate('/moe/school-management');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"w-4/5 bg-gray-200 rounded-full h-2\">\n          <div className=\"bg-blue-600 h-2 rounded-full animate-pulse\" style={{ width: '50%' }}></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"bg-white text-black p-4 shadow-md border-b border-gray-200\">\n        <div className=\"flex items-center justify-between max-w-7xl mx-auto\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={handleBack}\n              className=\"mr-4 text-black\"\n              aria-label=\"Go back\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                />\n              </svg>\n            </button>\n            <h1 className=\"text-xl font-bold\">Parent Management</h1>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4 max-w-7xl mx-auto\">\n        <div className=\"space-y-2\">\n          {parents.length === 0 ? (\n            <p className=\"text-gray-500 text-center\">No parents available.</p>\n          ) : (\n            parents.map((parent, index) => (\n              <div\n                key={parent.id}\n                onClick={() => handleParentClick(parent.id)}\n                className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 cursor-pointer hover:bg-gray-50 transition-colors\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    <div className=\"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center\">\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"h-5 w-5\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={2}\n                          d=\"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z\"\n                        />\n                      </svg>\n                    </div>\n                    <div className=\"ml-4\">\n                      <h3 className=\"text-base font-bold text-gray-800\">{parent.name}</h3>\n                      <div className=\"flex items-center\">\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          className=\"h-5 w-5 text-gray-600 mr-1\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                          stroke=\"currentColor\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={2}\n                            d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                          />\n                        </svg>\n                        <p className=\"text-sm text-gray-600\">{parent.children}</p>\n                      </div>\n                    </div>\n                  </div>\n                  <span\n                    className={`px-2 py-1 text-xs rounded ${\n                      parent.status === 'Active' ? 'bg-green-500 text-white' : 'bg-gray-500 text-white'\n                    }`}\n                  >\n                    {parent.status}\n                  </span>\n                </div>\n                {index < parents.length - 1 && <hr className=\"mt-4\" />}\n              </div>\n            ))\n          )}\n        </div>\n        <button\n          onClick={handleAddParent}\n          className=\"fixed bottom-4 right-4 bg-blue-600 text-white rounded-full p-4 shadow-lg hover:bg-blue-700 transition-colors\"\n          aria-label=\"Add parent\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-6 w-6\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M12 4v16m8-8H4\"\n            />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ParentManagement;\n"],"names":["ParentManagement","navigate","useNavigate","user","useAuth","REQUIRED_SECURITY_LEVEL","SecurityLevels","SCHOOL_ADMIN","parents","setParents","useState","loading","setLoading","useEffect","hasPermission","securityLevel","alert","api","get","then","response","data","catch","error","handleParentClick","parentId","handleAddParent","handleBack","jsx","width","jsxs","length","map","parent","index","id","name","children","status"],"mappings":"mJAOA,MAAMA,EAAmBA,IAAM,CAC7B,MAAMC,EAAWC,IACX,CAAEC,KAAAA,GAASC,EAAQ,EACnBC,EAA0BC,EAAeC,aACzC,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,CAAE,CAAA,EACnC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EAE3CG,EAAAA,UAAU,IAAM,CACV,CAACV,GAAQ,CAACW,EAAcT,EAAyBF,GAAAA,YAAAA,EAAMY,aAAa,GACtEC,MAAM,kDAAkD,EACxDf,EAAS,EAAE,IAEXW,EAAW,EAAI,EACfK,EAAIC,IAAI,UAAU,EACfC,KAAiBC,GAAA,CAChBX,EAAWW,EAASC,IAAI,EACxBT,EAAW,EAAK,CAAA,CACjB,EACAU,MAAeC,GAAA,CACNA,QAAAA,MAAM,0BAA2BA,CAAK,EAC9CP,MAAM,yBAAyB,EAC/BJ,EAAW,EAAK,CAAA,CACjB,EACL,EACC,CAACT,EAAMF,CAAQ,CAAC,EAEnB,MAAMuB,EAAkCC,GAAA,CAC7BxB,EAAA,uBAAuBwB,CAAQ,EAAE,CAAA,EAGtCC,EAAkBA,IAAM,CAC5BzB,EAAS,iBAAiB,CAAA,EAGtB0B,EAAaA,IAAM,CACvB1B,EAAS,wBAAwB,CAAA,EAGnC,OAAIU,EAECiB,EAAA,MAAA,CAAI,UAAU,2DACb,SAACA,EAAA,MAAA,CAAI,UAAU,qCACb,SAACA,EAAA,MAAA,CAAI,UAAU,6CAA6C,MAAO,CAAEC,MAAO,KAAA,EAAS,EACvF,CACF,CAAA,EAKFC,EAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAACF,EAAA,MAAA,CAAI,UAAU,6DACb,SAACA,EAAA,MAAA,CAAI,UAAU,sDACb,SAAAE,EAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAF,EAAC,SACC,CAAA,QAASD,EACT,UAAU,kBACV,aAAW,UAEX,SAAAC,EAAC,MACC,CAAA,MAAM,6BACN,UAAU,UACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,SAACA,EAAA,OAAA,CACC,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,6BAA6B,CAAA,CAEnC,CAAA,EACF,EACCA,EAAA,KAAA,CAAG,UAAU,oBAAoB,SAAiB,oBAAA,CAAA,CACrD,CAAA,CACF,CAAA,EACF,EAEAE,EAAC,MAAI,CAAA,UAAU,wBACb,SAAA,CAACF,EAAA,MAAA,CAAI,UAAU,YACZpB,SAAQuB,EAAAA,SAAW,EAClBH,EAAC,IAAE,CAAA,UAAU,4BAA4B,SAAA,uBAAA,CAAqB,EAE9DpB,EAAQwB,IAAI,CAACC,EAAQC,IACnBJ,EAAC,MAEC,CAAA,QAAS,IAAMN,EAAkBS,EAAOE,EAAE,EAC1C,UAAU,6GAEV,SAAA,CAACL,EAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACA,EAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACF,EAAA,MAAA,CAAI,UAAU,iFACb,SAACA,EAAA,MAAA,CACC,MAAM,6BACN,UAAU,UACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,SAAAA,EAAC,OACC,CAAA,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,oKAAoK,CAAA,CAE1K,CAAA,EACF,EACAE,EAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAAAF,EAAC,KAAG,CAAA,UAAU,oCAAqCK,SAAAA,EAAOG,KAAK,EAC/DN,EAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACF,EAAA,MAAA,CACC,MAAM,6BACN,UAAU,6BACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,SAACA,EAAA,OAAA,CACC,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,qEAAA,CAAqE,CAE3E,CAAA,EACCA,EAAA,IAAA,CAAE,UAAU,wBAAyBK,WAAOI,SAAS,CAAA,EACxD,CAAA,EACF,CAAA,EACF,EACAT,EAAC,OACC,CAAA,UAAW,6BACTK,EAAOK,SAAW,SAAW,0BAA4B,wBAAwB,GAGlFL,SAAAA,EAAOK,MACV,CAAA,CAAA,EACF,EACCJ,EAAQ1B,EAAQuB,OAAS,GAAMH,EAAA,KAAA,CAAG,UAAU,OAAS,CAnDjDK,CAAAA,EAAAA,EAAOE,EAoDd,CACD,EAEL,EACCP,EAAA,SAAA,CACC,QAASF,EACT,UAAU,+GACV,aAAW,aAEX,SAACE,EAAA,MAAA,CACC,MAAM,6BACN,UAAU,UACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,SAAAA,EAAC,QACC,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,gBAAgB,CAAA,CAEtB,CAAA,EACF,CAAA,EACF,CACF,CAAA,CAAA,CAEJ"}