{"version":3,"file":"ParentDetails-51d63788.js","sources":["../../src/components/ParentDetails.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useAuth } from '@/context';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\nimport api from '../api';\n\nconst ParentDetails = () => {\n  const navigate = useNavigate();\n  const { parentId } = useParams();\n  const { user } = useAuth();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.SCHOOL_ADMIN;\n  const [parent, setParent] = useState(null);\n  const [children, setChildren] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires SCHOOL ADMIN privileges.');\n      navigate(-1);\n    } else {\n      setLoading(true);\n      Promise.all([\n        api.get(`/parents/${parentId}`),\n        api.get(`/parents/${parentId}/children`)\n      ])\n        .then(([parentResponse, childrenResponse]) => {\n          setParent(parentResponse.data);\n          setChildren(childrenResponse.data);\n          setLoading(false);\n        })\n        .catch(error => {\n          console.error('Error fetching parent data:', error);\n          alert('Failed to load parent details.');\n          setLoading(false);\n          navigate(-1);\n        });\n    }\n  }, [user, parentId, navigate]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"w-4/5 bg-gray-200 rounded-full h-2\">\n          <div className=\"bg-blue-600 h-2 rounded-full animate-pulse\" style={{ width: '50%' }}></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!parent) {\n    return null; // Handled by useEffect redirect\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"bg-white text-black p-4 shadow-md border-b border-gray-200\">\n        <div className=\"flex items-center justify-between max-w-7xl mx-auto\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"mr-4 text-black\"\n              aria-label=\"Go back\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                />\n              </svg>\n            </button>\n            <h1 className=\"text-xl font-bold\">Parent Details</h1>\n          </div>\n          <span\n            className={`px-2 py-1 text-xs rounded ${\n              parent.status === 'Active' ? 'bg-green-500 text-white' : 'bg-gray-500 text-white'\n            }`}\n          >\n            {parent.status}\n          </span>\n        </div>\n      </div>\n\n      <div className=\"p-4 max-w-7xl mx-auto\">\n        <div className=\"bg-white rounded-lg shadow-md p-4 mb-4\">\n          <div className=\"flex items-center mb-2\">\n            <div className=\"w-14 h-14 bg-blue-600 text-white rounded-full flex items-center justify-center mr-2\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-8 w-8\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z\"\n                />\n              </svg>\n            </div>\n            <h2 className=\"text-xl font-bold\">{parent.name}</h2>\n          </div>\n          <div className=\"flex items-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-5 w-5 text-gray-600 mr-2\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n              />\n            </svg>\n            <p className=\"text-gray-600\">{parent.childrenInfo}</p>\n          </div>\n        </div>\n\n        <h2 className=\"text-lg font-bold text-blue-600 mb-2\">Contact Information</h2>\n        <div className=\"bg-white rounded-lg shadow-md p-4 mb-4\">\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center\">\n              <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"h-5 w-5 text-gray-600\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"\n                  />\n                </svg>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-bold text-gray-800\">Phone</p>\n                <p className=\"text-sm text-gray-600\">{parent.phone}</p>\n              </div>\n            </div>\n            <hr />\n            <div className=\"flex items-center\">\n              <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"h-5 w-5 text-gray-600\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"\n                  />\n                </svg>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-bold text-gray-800\">Email</p>\n                <p className=\"text-sm text-gray-600\">{parent.email}</p>\n              </div>\n            </div>\n            <hr />\n            <div className=\"flex items-center\">\n              <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"h-5 w-5 text-gray-600\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"\n                  />\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"\n                  />\n                </svg>\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-bold text-gray-800\">Address</p>\n                <p className=\"text-sm text-gray-600\">{parent.address}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <h2 className=\"text-lg font-bold text-blue-600 mb-2\">Children Details</h2>\n        <div className=\"bg-white rounded-lg shadow-md p-4\">\n          <div className=\"space-y-4\">\n            {children.length === 0 ? (\n              <p className=\"text-gray-500 text-center\">No children data available.</p>\n            ) : (\n              children.map((child, index) => (\n                <div key={index}>\n                  <div className=\"flex items-center\">\n                    <p className=\"text-sm font-bold text-gray-800\">{child.name}</p>\n                    <p className=\"text-sm text-gray-600 ml-2\">{child.grade} - {child.studentId}</p>\n                  </div>\n                  {index < children.length - 1 && <hr />}\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ParentDetails;\n"],"names":["ParentDetails","navigate","useNavigate","parentId","useParams","user","useAuth","REQUIRED_SECURITY_LEVEL","SecurityLevels","SCHOOL_ADMIN","parent","setParent","useState","children","setChildren","loading","setLoading","useEffect","hasPermission","securityLevel","alert","all","api","get","then","parentResponse","childrenResponse","data","catch","error","jsx","width","jsxs","status","name","childrenInfo","phone","email","address","length","map","child","index","grade","studentId"],"mappings":"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"}