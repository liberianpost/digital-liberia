import{u as M,a as A,b as k,r as c,j as a,c as e,L as E,D as P,S as _,F as z,d as I}from"./index-BsIO5Ny7.js";const q=[{label:"Home",to:"/",color:"bg-blue-500/80"},{label:"System",to:"/system",color:"bg-green-500/80"},{label:"Digital Liberia",to:"/digital-liberia",color:"bg-purple-500/80"},{label:"LibPay",to:"/libpay",color:"bg-yellow-500/80"},{label:"Liberian Post",to:"/liberian-post",color:"bg-pink-500/80"}],S=["/logos/liberianpost.png","/logos/digital.png","/logos/libmusic.png","/logos/libconnectsit.png","/logos/libpaysit.png","/logos/seal of liberia.png","/logos/liberia.png"],D=[{id:"education",name:"Ministry of Education",description:"School management, student records, and educational resources",icon:"/logos/moe.png"},{id:"health",name:"Ministry of Health",description:"Health records, vaccination data, and medical services",icon:"/logos/moh.png"},{id:"finance",name:"Ministry of Finance",description:"Tax records, financial services, and economic data",icon:"/logos/mof.png"},{id:"justice",name:"Ministry of Justice",description:"Legal documents, court records, and law enforcement",icon:"/logos/moj.png"},{id:"transport",name:"Ministry of Transport",description:"Driver licenses, vehicle registration, and transport permits",icon:"/logos/mot.png"},{id:"foreign",name:"Ministry of Foreign Affairs",description:"Passport services and international relations",icon:"/logos/mofa.png"},{id:"agriculture",name:"Ministry of Agriculture",description:"Farming permits, agricultural data, and food security",icon:"/logos/moa.png"},{id:"internal",name:"Ministry of Internal Affairs",description:"Citizen IDs, birth certificates, and local governance",icon:"/logos/moia.png"},{id:"lands",name:"Ministry of Lands & Mines",description:"Land deeds, mining permits, and property records",icon:"/logos/mol.png"},{id:"commerce",name:"Ministry of Commerce",description:"Business registration and trade licenses",icon:"/logos/moc.png"},{id:"labour",name:"Ministry of Labour",description:"Employment records and worker rights",icon:"/logos/moll.png"},{id:"youth",name:"Ministry of Youth & Sports",description:"Youth programs and sporting events",icon:"/logos/moy.png"}],T=[{id:"passport",name:"Passport"},{id:"birth-certificate",name:"Birth Certificate"},{id:"drivers-license",name:"Driver's License"},{id:"citizen-id",name:"Citizen ID"},{id:"business-registration",name:"Business Registration"},{id:"vehicle-registration",name:"Vehicle Registration"},{id:"land-deed",name:"Land Deed"},{id:"tax-services",name:"Tax Services"}],F=({onClose:o,onSuccess:f,service:d="Ministry of Education"})=>{const[g,v]=c.useState(""),[x,m]=c.useState(""),[i,u]=c.useState(!1),[N,y]=c.useState(null),[w,p]=c.useState(!1),[t,r]=c.useState(null),[l,L]=c.useState(null),C=async b=>{var n,h;try{const s=await I.post("/gov-services/request",{dssn:b,service:d,requestData:{timestamp:new Date().toISOString(),service:d,origin:window.location.origin}});if(!s.data.success)throw new Error(s.data.error||"Failed to initiate challenge");return s.data}catch(s){throw console.error("Error requesting DSSN challenge:",s),new Error(((h=(n=s.response)==null?void 0:n.data)==null?void 0:h.error)||s.message||"Failed to initiate DSSN challenge")}},j=async b=>{var n,h;try{const s=await I.get(`/gov-services/status/${b}`);if(!s.data.success)throw new Error(s.data.error||"Failed to check challenge status");return s.data}catch(s){throw console.error("Error polling challenge status:",s),new Error(((h=(n=s.response)==null?void 0:n.data)==null?void 0:h.error)||s.message||"Failed to check approval status")}};c.useEffect(()=>()=>{t&&clearInterval(t)},[t]);const O=async b=>{if(b.preventDefault(),m(""),u(!0),L(null),!g.trim()){m("Please enter your DSSN"),u(!1);return}try{const n=await C(g);y(n.challengeId),p(!0),u(!1),n.pushNotification&&L({sent:n.pushNotification.sent,hasToken:n.pushNotification.hasToken,error:n.pushNotification.error});const h=setInterval(async()=>{try{const s=await j(n.challengeId);s.status==="approved"?(clearInterval(h),p(!1),f(s.govToken,n.challengeId)):s.status==="denied"&&(clearInterval(h),p(!1),m("Access was denied on your mobile device"))}catch(s){console.error("Error polling challenge status:",s),clearInterval(h),p(!1),m(s.message)}},3e3);r(h),setTimeout(()=>{w&&(clearInterval(h),p(!1),m("Request timed out. Please try again."))},5*60*1e3)}catch(n){m(n.message),u(!1)}};return e("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:a("div",{className:"bg-white rounded-lg w-full max-w-md overflow-hidden shadow-xl",children:[a("div",{className:"bg-blue-600 p-4 flex justify-between items-center",children:[a("h2",{className:"text-xl font-bold text-white",children:[d," - DSSN Verification"]}),e("button",{onClick:o,className:"text-white text-2xl hover:text-gray-200",disabled:w||i,children:"×"})]}),a("div",{className:"p-6",children:[e("div",{className:"flex justify-center mb-6",children:e("img",{src:"/logos/moe.png",alt:"MOE Logo",className:"w-20 h-20 object-contain"})}),x&&e("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:x}),l&&!l.sent&&e("div",{className:"mb-4 p-3 bg-yellow-100 text-yellow-700 rounded-md text-sm",children:l.hasToken?`Push notification failed: ${l.error||"Unknown error"}`:"User doesn't have the mobile app installed. Please ask them to download it."}),w?a("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Waiting for Mobile Approval"}),e("p",{className:"text-gray-600 mb-4",children:"Please check your mobile app to approve this verification request."}),(l==null?void 0:l.sent)&&e("p",{className:"text-sm text-green-600 mb-2",children:"✓ Push notification sent to mobile device"}),a("p",{className:"text-sm text-gray-500",children:["Challenge ID: ",N]}),e("p",{className:"text-xs text-gray-400 mt-2",children:"This request will timeout in 5 minutes"})]}):a("form",{onSubmit:O,children:[a("div",{className:"mb-4",children:[e("label",{className:"block text-gray-900 mb-2 font-medium",children:"Digital Social Security Number (DSSN)"}),e("input",{type:"text",value:g,onChange:b=>v(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"Enter your DSSN",required:!0,autoFocus:!0,disabled:i}),e("p",{className:"text-sm text-gray-500 mt-1",children:"Enter your DSSN and approve the request on your mobile app"})]}),e("button",{type:"submit",disabled:i,className:`w-full py-3 px-4 rounded-md text-white font-semibold ${i?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} transition-colors flex items-center justify-center`,children:i?a(z,{children:[a("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify with DSSN"})]}),e("div",{className:"mt-4 text-center text-sm border-t border-gray-200 pt-4",children:a("p",{className:"text-gray-600",children:["Don't have the mobile app? ",e("a",{href:"#",className:"text-blue-600 hover:underline",onClick:b=>{b.preventDefault(),alert("The Digital Liberia mobile app is available on the App Store and Google Play Store")},children:"Download it here"})]})})]})]})})},$=()=>{const{user:o,logout:f}=M(),d=k(),[g]=c.useState(new Date),v=()=>{Object.keys(localStorage).filter(u=>u.startsWith("MOE_")).forEach(u=>localStorage.removeItem(u)),f(),d("/system")};if(c.useEffect(()=>{o||d("/system")},[o,d]),!o)return null;const x=P.filter(i=>i.requiredLevel<=o.securityLevel),m=i=>i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e("div",{className:"min-h-screen bg-gray-100 p-6",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 flex justify-between items-center",children:[a("div",{children:[a("h1",{className:"text-2xl font-bold text-gray-800",children:["Welcome, ",o.username]}),e("p",{className:"text-gray-600",children:m(g)}),a("p",{className:"text-sm text-gray-500",children:["DSSN: ",localStorage.getItem("MOE_DSSN")||"Not available"]})]}),e("button",{onClick:v,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Logout"})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(i=>e("div",{onClick:()=>d(i.path),className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:a("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600",children:e("span",{className:"text-xl",children:i.icon})}),a("div",{children:[e("h2",{className:"font-bold text-lg",children:i.title}),i.requiredLevel>=_.SCHOOL_ADMIN&&e("span",{className:"text-xs px-2 py-1 bg-blue-600 text-white rounded-full",children:U(i.requiredLevel).toUpperCase()})]})]})},i.id))})]})})},R=()=>{const o=k();return e("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full text-center",children:[e("div",{className:"text-red-500 mb-4",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Access Denied"}),e("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."}),e("button",{onClick:()=>o(-1),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Go Back"})]})})},V=()=>{var p;const{user:o}=M(),f=A(),d=k(),[g,v]=c.useState(0),[x,m]=c.useState(!1),[i,u]=c.useState(null);c.useEffect(()=>{const t=setInterval(()=>{v(r=>(r+1)%S.length)},600);return()=>clearInterval(t)},[]),c.useEffect(()=>{localStorage.getItem("MOE_LOGGED_IN")==="true"&&o?d("/moe-dashboard"):o||Object.keys(localStorage).filter(l=>l.startsWith("MOE_")).forEach(l=>localStorage.removeItem(l))},[o,d]);const N=async(t,r)=>{try{const l=JSON.parse(atob(t.split(".")[1]));localStorage.setItem("MOE_USER_ID",l.userId),localStorage.setItem("MOE_USERNAME","DSSN User"),localStorage.setItem("MOE_SECURITY_LEVEL","1"),localStorage.setItem("MOE_LOGGED_IN","true"),localStorage.setItem("MOE_GOV_TOKEN",t),localStorage.setItem("MOE_DSSN",l.dssn||""),localStorage.setItem("MOE_CHALLENGE_ID",r||""),localStorage.setItem("MOE_LOGIN_TIMESTAMP",new Date().toISOString()),m(!1),d("/moe-dashboard")}catch(l){console.error("Error processing DSSN login:",l),alert("Login failed. Please try again.")}},y=(t,r)=>{r.stopPropagation(),u(t),t==="education"?o?d("/moe-dashboard"):m(!0):(D.find(l=>l.id===t),m(!0))},w=(t,r)=>{r.stopPropagation(),alert(`${t.replace("-"," ")} service will be available soon`)};return a("div",{className:"relative min-h-screen w-full bg-blue-950 text-white font-inter overflow-x-hidden",children:[e("div",{className:"fixed inset-0 bg-blue-950 -z-50"}),e("div",{className:"fixed inset-0 flex items-center justify-center z-10 pointer-events-none",children:e("div",{className:"relative w-full max-w-2xl mx-4 h-64 md:h-96 flex items-center justify-center",children:S.map((t,r)=>a("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-1000 ${r===g?"opacity-100":"opacity-0"}`,children:[e("img",{src:t,alt:`Logo ${r}`,className:"max-w-full max-h-full object-contain"}),e("div",{className:"absolute inset-0 bg-black/5"})]},r))})}),e("header",{className:"fixed top-0 left-0 w-full z-50",children:a("div",{className:"bg-blue-950/80 backdrop-blur-md border-b border-blue-700/30",children:[e("div",{className:"flex items-center justify-center px-4 py-4 max-w-7xl mx-auto",children:e("nav",{className:"flex space-x-2 md:space-x-4 overflow-x-auto w-full justify-center",children:q.map(t=>e("div",{className:`flex-shrink-0 ${t.color} px-3 py-1 rounded-lg`,children:e(E,{to:t.to,className:`text-sm md:text-base lg:text-lg font-bold transition-colors duration-300 ${f.pathname===t.to?"text-red-500":"text-white hover:text-blue-300"}`,children:t.label})},t.to))})}),e("div",{className:"w-full bg-gradient-to-b from-blue-950 to-transparent overflow-x-auto",children:e("div",{className:"flex flex-nowrap px-4 space-x-4 w-max max-w-full mx-auto py-3",children:S.map((t,r)=>e("div",{className:`flex-shrink-0 flex items-center justify-center p-2 rounded-lg transition-all duration-300 ${r===g?"scale-110 bg-white shadow-lg":"scale-100 bg-white/90"}`,style:{animation:r===g?"heartbeat 600ms ease-in-out":"none"},children:e("img",{src:t,alt:`Logo ${r}`,className:"w-12 h-12 md:w-16 md:h-16 object-contain"})},r))})})]})}),a("main",{className:"relative z-30 pt-48 pb-20 px-4 md:px-8",children:[e("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:a("div",{className:"bg-gradient-to-br from-rose-500/10 via-red-500/10 to-orange-600/10 backdrop-blur-lg rounded-xl border border-rose-400/30 p-6 md:p-8 shadow-lg relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-sm"}),a("div",{className:"relative",children:[e("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-white border-b border-white/20 pb-2",children:"Digital Social Security Number (DSSN)"}),a("div",{className:"text-white space-y-4",children:[e("p",{children:"In the Digital Liberia project, the DSSN (Digital Social Security Number) is a unique digital identifier assigned to every Liberian citizen or legal resident within the system."}),e(E,{to:"/dssn",className:"inline-flex items-center bg-blue-500/80 backdrop-blur-sm rounded-lg px-3 py-1 ml-2 border border-blue-400/30 cursor-pointer hover:bg-blue-600/80 transition-colors",children:"(click here to verify a DSSN)"})]})]})]})}),e("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:a("div",{className:"bg-gradient-to-br from-green-500/10 via-teal-500/10 to-emerald-600/10 backdrop-blur-lg rounded-xl border border-green-400/30 p-6 md:p-8 shadow-lg relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-sm"}),a("div",{className:"relative",children:[e("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-white border-b border-white/20 pb-2",children:"Digital Liberia System"}),e("div",{className:"text-white",children:e("p",{children:"The National Database Management System (NDMS) is the secure, centralized, and intelligent national data backbone that powers Digital Liberia."})})]})]})}),e("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:a("div",{className:"bg-gradient-to-br from-purple-500/10 via-indigo-500/10 to-blue-600/10 backdrop-blur-lg rounded-xl border border-purple-400/30 p-6 md:p-8 shadow-lg relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-sm"}),a("div",{className:"relative",children:[e("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-white border-b border-white/20 pb-2",children:"Government Ministries"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.map(t=>e("div",{onClick:r=>y(t.id,r),className:"cursor-pointer bg-white/5 hover:bg-white/10 transition-colors p-4 rounded-lg border border-white/10 backdrop-blur-sm relative z-20",children:a("div",{className:"flex items-center space-x-4",children:[e("img",{src:t.icon,alt:t.name,className:"w-12 h-12 object-contain"}),a("div",{children:[e("h3",{className:"font-bold text-lg",children:t.name}),e("p",{className:"text-sm text-white/80",children:t.description})]})]})},t.id))})]})]})}),e("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:a("div",{className:"bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-blue-600/10 backdrop-blur-lg rounded-xl border border-blue-400/30 p-6 md:p-8 shadow-lg relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-sm"}),a("div",{className:"relative",children:[e("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-white border-b border-white/20 pb-2",children:"Quick Access Services"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:T.map(t=>e("button",{onClick:r=>w(t.id,r),className:"bg-white/5 hover:bg-white/10 transition-colors p-4 rounded-lg border border-white/10 backdrop-blur-sm text-left",children:e("h3",{className:"font-bold text-lg",children:t.name})},t.id))})]})]})})]}),e("footer",{className:"relative z-30 py-6 text-center text-white/60 text-sm",children:a("div",{className:"border-t border-blue-700/30 pt-6",children:["© ",new Date().getFullYear()," Digital Liberia. All rights reserved."]})}),x&&e(F,{onClose:()=>m(!1),onSuccess:N,service:i?(p=D.find(t=>t.id===i))==null?void 0:p.name:"Ministry of Education"}),e("style",{jsx:!0,global:!0,children:`
        @keyframes heartbeat {
          0% { transform: scale(1); }
          25% { transform: scale(1.1); }
          50% { transform: scale(1); }
          75% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        .overflow-x-auto {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        .overflow-x-auto::-webkit-scrollbar {
          display: none;
        }
      `})]})};function U(o){return{1:"User",2:"School Admin",3:"District Admin",4:"Ministry Admin",5:"System Admin"}[o]||"Unknown"}export{$ as MoeDashboard,R as UnauthorizedPage,V as default};
