{"version":3,"file":"MinistryEmployeeManagement-242e950e.js","sources":["../../src/components/MinistryEmployeeManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/context';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\nimport api from '../api';\n\nconst MinistryEmployeeManagement = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.DATABASE_ADMIN;\n  const [employees, setEmployees] = useState([]);\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires DATABASE ADMIN privileges.');\n      navigate(-1);\n    } else {\n      api.get('/employees')\n        .then(response => setEmployees(response.data))\n        .catch(error => {\n          console.error('Error fetching employees:', error);\n          alert('Failed to load employees.');\n        });\n    }\n  }, [user, navigate]);\n\n  const handleAddEmployee = async () => {\n    try {\n      await api.post('/employees/add');\n      alert('Add New Employee feature initiated.');\n    } catch (error) {\n      console.error('Error adding employee:', error);\n      alert('Failed to initiate add employee.');\n    }\n  };\n\n  const handleEmployeeAction = async (employee, action) => {\n    try {\n      await api.post(`/employees/${employee.id}/${action.toLowerCase()}`);\n      alert(`${action} employee ${employee.name} initiated.`);\n    } catch (error) {\n      console.error(`Error performing ${action} on employee:`, error);\n      alert(`Failed to ${action.toLowerCase()} employee ${employee.name}.`);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <div className=\"bg-white text-black p-4 shadow-md border-b border-gray-200\">\n        <div className=\"flex items-center justify-between max-w-7xl mx-auto\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"mr-4 text-black\"\n              aria-label=\"Go back\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                />\n              </svg>\n            </button>\n            <h1 className=\"text-xl font-bold\">Ministry Employees</h1>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4 max-w-3xl mx-auto\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4\">\n          <h2 className=\"text-lg font-bold text-black\">Ministry Employee Management</h2>\n          <p className=\"mt-1 text-sm text-gray-600\">Manage all ministry employees</p>\n          <button\n            onClick={handleAddEmployee}\n            className=\"mt-4 w-full py-3 px-4 bg-blue-600 text-white rounded-md flex items-center justify-center hover:bg-blue-700 transition-colors\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-5 w-5 mr-2\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M12 4v16m8-8H4\"\n              />\n            </svg>\n            Add New Employee\n          </button>\n        </div>\n\n        <div className=\"space-y-2\">\n          {employees.length === 0 ? (\n            <p className=\"text-gray-500 text-center\">No employees available.</p>\n          ) : (\n            employees.map((employee, index) => (\n              <EmployeeCard\n                key={index}\n                employee={employee}\n                onAction={handleEmployeeAction}\n              />\n            ))\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst EmployeeCard = ({ employee, onAction }) => {\n  const getStatusStyles = (status) => {\n    switch (status.toLowerCase()) {\n      case 'active':\n        return 'bg-green-500 text-white';\n      case 'suspended':\n        return 'bg-red-500 text-white';\n      default:\n        return 'bg-gray-500 text-white';\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <img\n            src=\"/logos/person.png\"\n            alt=\"Employee icon\"\n            className=\"w-10 h-10 object-contain\"\n            onError={(e) => {\n              console.error('Failed to load employee icon');\n              e.target.src = 'https://via.placeholder.com/40?text=Person';\n            }}\n          />\n          <div className=\"ml-4\">\n            <h3 className=\"text-base font-bold text-black\">{employee.name}</h3>\n            <p className=\"text-sm text-gray-600\">{employee.position}</p>\n          </div>\n        </div>\n        <span\n          className={`px-2 py-1 text-xs rounded ${getStatusStyles(employee.status)}`}\n        >\n          {employee.status}\n        </span>\n      </div>\n      <div className=\"mt-4 flex space-x-2\">\n        <button\n          onClick={() => onAction(employee, 'Edit')}\n          className=\"flex-1 py-2 px-3 border border-gray-300 rounded-md text-black flex items-center justify-center hover:bg-gray-100 transition-colors\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5 mr-2\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n            />\n          </svg>\n          Edit\n        </button>\n        <button\n          onClick={() => onAction(employee, 'Suspend')}\n          className=\"flex-1 py-2 px-3 border border-gray-300 rounded-md text-black flex items-center justify-center hover:bg-gray-100 transition-colors\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5 mr-2\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n            />\n          </svg>\n          Suspend\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default MinistryEmployeeManagement;\n"],"names":["MinistryEmployeeManagement","user","useAuth","navigate","useNavigate","REQUIRED_SECURITY_LEVEL","SecurityLevels","DATABASE_ADMIN","employees","setEmployees","useState","useEffect","hasPermission","securityLevel","alert","get","then","response","data","catch","error","handleAddEmployee","api","post","handleEmployeeAction","employee","action","id","toLowerCase","name","console","jsxs","jsx","length","map","index","EmployeeCard","onAction","getStatusStyles","status","e","target","src","position"],"mappings":"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"}