{"version":3,"file":"SchoolAdminManagement-e2c4d1bd.js","sources":["../../src/components/SchoolAdminManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@context/AuthContext';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\nimport api from '../api';\n\nconst SchoolAdminManagement = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.DATABASE_ADMIN;\n  const [admins, setAdmins] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires DATABASE ADMIN privileges.');\n      navigate(-1);\n    } else {\n      setLoading(true);\n      api.get('/school-admins')\n        .then(response => {\n          setAdmins(response.data);\n          setLoading(false);\n        })\n        .catch(error => {\n          console.error('Error fetching admins:', error);\n          alert('Failed to load administrators.');\n          setLoading(false);\n        });\n    }\n  }, [user, navigate]);\n\n  const handleAddAdmin = async () => {\n    try {\n      await api.post('/school-admins/add');\n      alert('Add New Administrator feature initiated.');\n    } catch (error) {\n      console.error('Error adding admin:', error);\n      alert('Failed to initiate add administrator.');\n    }\n  };\n\n  const handleFilter = (type) => {\n    alert(`Filter by ${type} feature coming soon`);\n  };\n\n  const handleAdminAction = async (admin, action) => {\n    try {\n      await api.post(`/school-admins/${admin.id}/${action.toLowerCase()}`);\n      alert(`${action} admin ${admin.name} initiated.`);\n    } catch (error) {\n      console.error(`Error performing ${action} on admin:`, error);\n      alert(`Failed to ${action.toLowerCase()} admin ${admin.name}.`);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"w-4/5 bg-gray-200 rounded-full h-2\">\n          <div className=\"bg-blue-600 h-2 rounded-full animate-pulse\" style={{ width: '50%' }}></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <div className=\"bg-white text-black p-4 shadow-md border-b border-gray-200\">\n        <div className=\"flex items-center justify-between max-w-7xl mx-auto\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"mr-4 text-black\"\n              aria-label=\"Go back\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                />\n              </svg>\n            </button>\n            <h1 className=\"text-xl font-bold\">School Administrators</h1>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4 max-w-3xl mx-auto\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4\">\n          <h2 className=\"text-lg font-bold text-black\">School Administrator Management</h2>\n          <p className=\"mt-1 text-sm text-gray-600\">Manage administrators by location</p>\n          <div className=\"mt-2 flex space-x-2\">\n            <button\n              onClick={() => handleFilter('County')}\n              className=\"flex-1 py-2 px-3 border border-gray-300 rounded-md text-black flex items-center justify-center hover:bg-gray-100 transition-colors\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-5 w-5 mr-2\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"\n                />\n              </svg>\n              County\n            </button>\n            <button\n              onClick={() => handleFilter('District')}\n              className=\"flex-1 py-2 px-3 border border-gray-300 rounded-md text-black flex items-center justify-center hover:bg-gray-100 transition-colors\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-5 w-5 mr-2\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"\n                />\n              </svg>\n              District\n            </button>\n            <button\n              onClick={() => handleFilter('City')}\n              className=\"flex-1 py-2 px-3 border border-gray-300 rounded-md text-black flex items-center justify-center hover:bg-gray-100 transition-colors\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-5 w-5 mr-2\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"\n                />\n              </svg>\n              City\n            </button>\n          </div>\n          <button\n            onClick={handleAddAdmin}\n            className=\"mt-4 w-full py-3 px-4 bg-blue-600 text-white rounded-md flex items-center justify-center hover:bg-blue-700 transition-colors\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-5 w-5 mr-2\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M12 4v16m8-8H4\"\n              />\n            </svg>\n            Add New Administrator\n          </button>\n        </div>\n\n        <div className=\"space-y-2\">\n          {admins.length === 0 ? (\n            <p className=\"text-gray-500 text-center\">No administrators available.</p>\n          ) : (\n            admins.map((admin, index) => (\n              <AdminCard\n                key={index}\n                admin={admin}\n                onAction={handleAdminAction}\n              />\n            ))\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst AdminCard = ({ admin, onAction }) => {\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\n      <div className=\"flex items-center\">\n        <img\n          src=\"/logos/admin.png\"\n          alt=\"Admin icon\"\n          className=\"w-10 h-10 object-contain\"\n          onError={(e) => {\n            console.error('Failed to load admin icon');\n            e.target.src = 'https://via.placeholder.com/40?text=Admin';\n          }}\n        />\n        <div className=\"ml-4 flex-1\">\n          <h3 className=\"text-base font-bold text-black\">{admin.name}</h3>\n          <p className=\"text-sm text-gray-600\">{admin.school}</p>\n        </div>\n      </div>\n      <div className=\"mt-2 flex flex-wrap gap-1\">\n        <span className=\"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded\">\n          {admin.county}\n        </span>\n        <span className=\"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded\">\n          {admin.district}\n        </span>\n        <span className=\"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded\">\n          {admin.city}\n        </span>\n      </div>\n      <div className=\"mt-4 flex space-x-2\">\n        <button\n          onClick={() => onAction(admin, 'Edit')}\n          className=\"flex-1 py-2 px-3 border border-gray-300 rounded-md text-black flex items-center justify-center hover:bg-gray-100 transition-colors\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5 mr-2\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n            />\n          </svg>\n          Edit\n        </button>\n        <button\n          onClick={() => onAction(admin, 'Remove')}\n          className=\"flex-1 py-2 px-3 border border-gray-300 rounded-md text-black flex items-center justify-center hover:bg-gray-100 transition-colors\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-5 w-5 mr-2\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M6 18L18 6M6 6l12 12\"\n            />\n          </svg>\n          Remove\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SchoolAdminManagement;\n"],"names":["SchoolAdminManagement","user","useAuth","navigate","useNavigate","REQUIRED_SECURITY_LEVEL","SecurityLevels","DATABASE_ADMIN","admins","setAdmins","useState","loading","setLoading","useEffect","hasPermission","securityLevel","alert","api","get","then","response","data","catch","error","handleAddAdmin","post","handleFilter","type","handleAdminAction","admin","action","id","toLowerCase","name","console","jsx","width","jsxs","length","map","index","AdminCard","onAction","e","target","src","school","county","district","city"],"mappings":"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"}