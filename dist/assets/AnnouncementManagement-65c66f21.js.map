{"version":3,"file":"AnnouncementManagement-65c66f21.js","sources":["../../src/components/AnnouncementManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/context';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\nimport api from '../api';\n\nconst AnnouncementManagement = () => {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.SCHOOL_ADMIN;\n  const [announcements, setAnnouncements] = useState([]);\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires SCHOOL ADMIN privileges.');\n      navigate(-1);\n    } else {\n      // Fetch announcements\n      api.get('/announcements')\n        .then(response => setAnnouncements(response.data))\n        .catch(error => {\n          console.error('Error fetching announcements:', error);\n          alert('Failed to load announcements.');\n        });\n    }\n  }, [user, navigate]);\n\n  const handleAddAnnouncement = () => {\n    navigate('/moe/add-announcement');\n  };\n\n  const handleAnnouncementClick = (announcement) => {\n    navigate('/moe/announcement-details', { state: { announcement } });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Toolbar */}\n      <div className=\"bg-white text-black p-4 shadow-md border-b border-gray-200\">\n        <div className=\"flex items-center justify-between max-w-7xl mx-auto\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"mr-4 text-black\"\n              aria-label=\"Go back\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                />\n              </svg>\n            </button>\n            <h1 className=\"text-xl font-bold\">Announcement Management</h1>\n          </div>\n        </div>\n      </div>\n\n      {/* Announcement List */}\n      <div className=\"p-4 max-w-3xl mx-auto\">\n        {announcements.length === 0 ? (\n          <p className=\"text-gray-500 text-center\">No announcements available.</p>\n        ) : (\n          <ul className=\"space-y-2\">\n            {announcements.map((announcement, index) => (\n              <li\n                key={index}\n                onClick={() => handleAnnouncementClick(announcement)}\n                className=\"bg-white rounded-lg shadow-md p-4 cursor-pointer hover:shadow-lg transition-shadow\"\n              >\n                <div className=\"flex items-center\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"h-6 w-6 text-blue-600 mr-2\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.379c.484 0 .951.214 1.29.585\"\n                    />\n                  </svg>\n                  <div>\n                    <h3 className=\"text-lg font-bold\">{announcement.title}</h3>\n                    <p className=\"text-sm text-gray-600\">{announcement.date}</p>\n                    <p className=\"text-gray-700\">{announcement.description}</p>\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n\n      {/* Add Announcement Button */}\n      <button\n        onClick={handleAddAnnouncement}\n        className=\"fixed bottom-4 right-4 bg-blue-600 text-white rounded-full p-3 shadow-lg hover:bg-blue-700\"\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          className=\"h-6 w-6\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M12 4v16m8-8H4\"\n          />\n        </svg>\n      </button>\n    </div>\n  );\n};\n\nexport default AnnouncementManagement;\n"],"names":["AnnouncementManagement","navigate","useNavigate","user","useAuth","REQUIRED_SECURITY_LEVEL","SecurityLevels","SCHOOL_ADMIN","announcements","setAnnouncements","useState","useEffect","hasPermission","securityLevel","alert","get","then","response","data","catch","error","handleAddAnnouncement","handleAnnouncementClick","announcement","state","jsxs","jsx","length","map","index","title","date","description"],"mappings":"oLAOA,MAAMA,EAAyBA,IAAM,CACnC,MAAMC,EAAWC,IACX,CAAEC,KAAAA,GAASC,EAAQ,EACnBC,EAA0BC,EAAeC,aACzC,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAAS,CAAE,CAAA,EAErDC,EAAAA,UAAU,IAAM,CACV,CAACR,GAAQ,CAACS,EAAcP,EAAyBF,GAAAA,YAAAA,EAAMU,aAAa,GACtEC,MAAM,kDAAkD,EACxDb,EAAS,EAAE,GAGPc,EAAAA,IAAI,gBAAgB,EACrBC,KAAKC,GAAYR,EAAiBQ,EAASC,IAAI,CAAC,EAChDC,MAAeC,GAAA,CACNA,QAAAA,MAAM,gCAAiCA,CAAK,EACpDN,MAAM,+BAA+B,CAAA,CACtC,CACL,EACC,CAACX,EAAMF,CAAQ,CAAC,EAEnB,MAAMoB,EAAwBA,IAAM,CAClCpB,EAAS,uBAAuB,CAAA,EAG5BqB,EAA4CC,GAAA,CAChDtB,EAAS,4BAA6B,CAAEuB,MAAO,CAAED,aAAAA,CAAa,CAAA,CAAG,CAAA,EAIjE,OAAAE,EAAC,MAAI,CAAA,UAAU,0BAEb,SAAA,CAACC,EAAA,MAAA,CAAI,UAAU,6DACb,SAACA,EAAA,MAAA,CAAI,UAAU,sDACb,SAAAD,EAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAC,EAAC,SACC,CAAA,QAAS,IAAMzB,EAAS,EAAE,EAC1B,UAAU,kBACV,aAAW,UAEX,SAAAyB,EAAC,MACC,CAAA,MAAM,6BACN,UAAU,UACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,WAAC,OACC,CAAA,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,6BAA6B,CAAA,CAEnC,CAAA,EACF,EACCA,EAAA,KAAA,CAAG,UAAU,oBAAoB,SAAuB,0BAAA,CAAA,CAC3D,CAAA,CACF,CAAA,EACF,EAGCA,EAAA,MAAA,CAAI,UAAU,wBACZlB,WAAcmB,SAAW,EACvBD,EAAA,IAAA,CAAE,UAAU,4BAA4B,SAAA,6BAA2B,CAAA,EAEpEA,EAAC,MAAG,UAAU,YACXlB,SAAcoB,EAAAA,IAAI,CAACL,EAAcM,IAChCH,EAAC,MAEC,QAAS,IAAMJ,EAAwBC,CAAY,EACnD,UAAU,qFAEV,SAACE,EAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACC,EAAA,MAAA,CACC,MAAM,6BACN,UAAU,6BACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,SAACA,EAAA,OAAA,CACC,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,wIAAA,CAAwI,CAE9I,CAAA,IACC,MACC,CAAA,SAAA,CAAAA,EAAC,KAAG,CAAA,UAAU,oBAAqBH,SAAAA,EAAaO,MAAM,EACrDJ,EAAA,IAAA,CAAE,UAAU,wBAAyBH,WAAaQ,KAAK,EACvDL,EAAA,IAAA,CAAE,UAAU,gBAAiBH,WAAaS,YAAY,CAAA,EACzD,CAAA,CAAA,CACF,CAxBKH,EAAAA,CAyBP,CACD,CAAA,CACH,CAEJ,CAAA,EAGCH,EAAA,SAAA,CACC,QAASL,EACT,UAAU,6FAEV,SAACK,EAAA,MAAA,CACC,MAAM,6BACN,UAAU,UACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,SAACA,EAAA,OAAA,CACC,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,gBAAgB,CAAA,CAEtB,CAAA,EACF,CACF,CAAA,CAAA,CAEJ"}