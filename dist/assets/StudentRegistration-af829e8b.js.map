{"version":3,"file":"StudentRegistration-af829e8b.js","sources":["../../src/components/StudentRegistration.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/context';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\nimport api from '../api';\n\nconst StudentRegistration = () => {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.SCHOOL_ADMIN;\n  const [formData, setFormData] = useState({\n    fullName: '',\n    dateOfBirth: '',\n    gender: '',\n    grade: '',\n    parentName: '',\n    parentContact: ''\n  });\n  const [errors, setErrors] = useState({});\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires SCHOOL ADMIN privileges.');\n      navigate('/moe/dashboard', { replace: true });\n    }\n  }, [user, navigate]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    setErrors(prev => ({ ...prev, [name]: '' }));\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.fullName) newErrors.fullName = 'Full Name is required';\n    if (!formData.dateOfBirth) newErrors.dateOfBirth = 'Date of Birth is required';\n    if (!formData.gender) newErrors.gender = 'Gender is required';\n    if (!formData.grade) newErrors.grade = 'Grade is required';\n    if (!formData.parentName) newErrors.parentName = 'Parent Name is required';\n    if (!formData.parentContact || !/^\\+\\d{10,}$/.test(formData.parentContact)) {\n      newErrors.parentContact = 'Valid phone number is required (e.g., +1234567890)';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) return;\n    try {\n      await api.post('/students/register', formData);\n      alert('Student registered successfully.');\n      navigate(-1);\n    } catch (error) {\n      console.error('Error registering student:', error);\n      alert('Failed to register student.');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"bg-white text-black p-4 shadow-md border-b border-gray-200\">\n        <div className=\"flex items-center justify-between max-w-7xl mx-auto\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"mr-4 text-black\"\n              aria-label=\"Go back\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                />\n              </svg>\n            </button>\n            <h1 className=\"text-xl font-bold\">Student Registration</h1>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-4 max-w-7xl mx-auto\">\n        <form onSubmit={handleSubmit} className=\"bg-white rounded-lg shadow-md p-6\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-600\">Full Name</label>\n              <input\n                type=\"text\"\n                name=\"fullName\"\n                value={formData.fullName}\n                onChange={handleChange}\n                className=\"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n                required\n              />\n              {errors.fullName && <p className=\"text-red-500 text-xs mt-1\">{errors.fullName}</p>}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-600\">Date of Birth</label>\n              <input\n                type=\"date\"\n                name=\"dateOfBirth\"\n                value={formData.dateOfBirth}\n                onChange={handleChange}\n                className=\"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n                required\n              />\n              {errors.dateOfBirth && <p className=\"text-red-500 text-xs mt-1\">{errors.dateOfBirth}</p>}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-600\">Gender</label>\n              <select\n                name=\"gender\"\n                value={formData.gender}\n                onChange={handleChange}\n                className=\"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n                required\n              >\n                <option value=\"\">Select Gender</option>\n                <option value=\"Male\">Male</option>\n                <option value=\"Female\">Female</option>\n                <option value=\"Other\">Other</option>\n              </select>\n              {errors.gender && <p className=\"text-red-500 text-xs mt-1\">{errors.gender}</p>}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-600\">Grade</label>\n              <select\n                name=\"grade\"\n                value={formData.grade}\n                onChange={handleChange}\n                className=\"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n                required\n              >\n                <option value=\"\">Select Grade</option>\n                {Array.from({ length: 12 }, (_, i) => (\n                  <option key={i + 1} value={`Grade ${i + 1}`}>Grade {i + 1}</option>\n                ))}\n              </select>\n              {errors.grade && <p className=\"text-red-500 text-xs mt-1\">{errors.grade}</p>}\n            </div>\n            <div className=\"sm:col-span-2\">\n              <h2 className=\"text-lg font-bold text-gray-800 mt-4\">Parent/Guardian Information</h2>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-600\">Parent Name</label>\n              <input\n                type=\"text\"\n                name=\"parentName\"\n                value={formData.parentName}\n                onChange={handleChange}\n                className=\"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n                required\n              />\n              {errors.parentName && <p className=\"text-red-500 text-xs mt-1\">{errors.parentName}</p>}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-600\">Parent Contact</label>\n              <input\n                type=\"tel\"\n                name=\"parentContact\"\n                value={formData.parentContact}\n                onChange={handleChange}\n                className=\"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n                required\n              />\n              {errors.parentContact && <p className=\"text-red-500 text-xs mt-1\">{errors.parentContact}</p>}\n            </div>\n            <div className=\"sm:col-span-2 mt-4\">\n              <button\n                type=\"submit\"\n                className=\"w-full bg-blue-600 text-white py-3 rounded-md flex items-center justify-center hover:bg-blue-700 transition-colors\"\n              >\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"h-5 w-5 mr-2\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\"\n                  />\n                </svg>\n                Register Student\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default StudentRegistration;\n"],"names":["StudentRegistration","navigate","useNavigate","user","useAuth","REQUIRED_SECURITY_LEVEL","SecurityLevels","SCHOOL_ADMIN","formData","setFormData","useState","fullName","dateOfBirth","gender","grade","parentName","parentContact","errors","setErrors","useEffect","hasPermission","securityLevel","alert","replace","handleChange","e","name","value","target","prev","validateForm","newErrors","test","Object","keys","length","jsxs","jsx","preventDefault","api","post","error","Array","from","_","i"],"mappings":"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"}