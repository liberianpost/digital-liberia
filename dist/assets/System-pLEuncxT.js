import{u as I,a as O,b as S,r as o,j as a,c as e,L,D as j,S as _,F as z,d as E}from"./index-D1LdoAPP.js";const A=[{label:"Home",to:"/",color:"bg-blue-500/80"},{label:"System",to:"/system",color:"bg-green-500/80"},{label:"Digital Liberia",to:"/digital-liberia",color:"bg-purple-500/80"},{label:"LibPay",to:"/libpay",color:"bg-yellow-500/80"},{label:"Liberian Post",to:"/liberian-post",color:"bg-pink-500/80"}],y=["/logos/liberianpost.png","/logos/digital.png","/logos/libmusic.png","/logos/libconnectsit.png","/logos/libpaysit.png","/logos/seal of liberia.png","/logos/liberia.png"],k=[{id:"education",name:"Ministry of Education",description:"School management, student records, and educational resources",icon:"/logos/moe.png"},{id:"health",name:"Ministry of Health",description:"Health records, vaccination data, and medical services",icon:"/logos/moh.png"},{id:"finance",name:"Ministry of Finance",description:"Tax records, financial services, and economic data",icon:"/logos/mof.png"},{id:"justice",name:"Ministry of Justice",description:"Legal documents, court records, and law enforcement",icon:"/logos/moj.png"},{id:"transport",name:"Ministry of Transport",description:"Driver licenses, vehicle registration, and transport permits",icon:"/logos/mot.png"},{id:"foreign",name:"Ministry of Foreign Affairs",description:"Passport services and international relations",icon:"/logos/mofa.png"},{id:"agriculture",name:"Ministry of Agriculture",description:"Farming permits, agricultural data, and food security",icon:"/logos/moa.png"},{id:"internal",name:"Ministry of Internal Affairs",description:"Citizen IDs, birth certificates, and local governance",icon:"/logos/moia.png"},{id:"lands",name:"Ministry of Lands & Mines",description:"Land deeds, mining permits, and property records",icon:"/logos/mol.png"},{id:"commerce",name:"Ministry of Commerce",description:"Business registration and trade licenses",icon:"/logos/moc.png"},{id:"labour",name:"Ministry of Labour",description:"Employment records and worker rights",icon:"/logos/moll.png"},{id:"youth",name:"Ministry of Youth & Sports",description:"Youth programs and sporting events",icon:"/logos/moy.png"}],G=[{id:"passport",name:"Passport"},{id:"birth-certificate",name:"Birth Certificate"},{id:"drivers-license",name:"Driver's License"},{id:"citizen-id",name:"Citizen ID"},{id:"business-registration",name:"Business Registration"},{id:"vehicle-registration",name:"Vehicle Registration"},{id:"land-deed",name:"Land Deed"},{id:"tax-services",name:"Tax Services"}],P=({onClose:s,onSuccess:b})=>{const[i,m]=o.useState(""),[h,d]=o.useState(""),[n,l]=o.useState(!1),[v,N]=o.useState(null),[t,r]=o.useState(!1),[u,w]=o.useState(null),M=async g=>{try{return(await E.post("/gov-services/request",{dssn:g})).data}catch(c){throw console.error("Error requesting DSSN challenge:",c),c}},C=async g=>{try{return(await E.get(`/gov-services/status/${g}`)).data}catch(c){throw console.error("Error polling challenge status:",c),c}};return o.useEffect(()=>()=>{u&&clearInterval(u)},[u]),e("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:a("div",{className:"bg-white rounded-lg w-full max-w-md overflow-hidden shadow-xl",children:[a("div",{className:"bg-blue-600 p-4 flex justify-between items-center",children:[e("h2",{className:"text-xl font-bold text-white",children:"Ministry of Education - DSSN Verification"}),e("button",{onClick:s,className:"text-white text-2xl hover:text-gray-200",disabled:t,children:"×"})]}),a("div",{className:"p-6",children:[e("div",{className:"flex justify-center mb-6",children:e("img",{src:"/logos/moe.png",alt:"MOE Logo",className:"w-20 h-20 object-contain"})}),h&&e("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:h}),t?a("div",{className:"text-center",children:[e("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Waiting for Mobile Approval"}),e("p",{className:"text-gray-600 mb-4",children:"Please check your mobile app to approve this login request."}),a("p",{className:"text-sm text-gray-500",children:["Challenge ID: ",v]})]}):a("form",{onSubmit:async g=>{var c,D;g.preventDefault(),d(""),l(!0);try{const x=await M(i);N(x.challengeId),r(!0),l(!1);const f=setInterval(async()=>{try{const p=await C(x.challengeId);p.status==="approved"?(clearInterval(f),r(!1),b(p.govToken)):p.status==="denied"&&(clearInterval(f),r(!1),d("Challenge was denied"))}catch(p){console.error("Error polling challenge status:",p),clearInterval(f),r(!1),d("Error checking approval status")}},3e3);w(f)}catch(x){d(((D=(c=x.response)==null?void 0:c.data)==null?void 0:D.error)||"Failed to initiate DSSN challenge"),l(!1)}},children:[a("div",{className:"mb-4",children:[e("label",{className:"block text-gray-900 mb-2 font-medium",children:"Digital Social Security Number (DSSN)"}),e("input",{type:"text",value:i,onChange:g=>m(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"Enter your DSSN",required:!0,autoFocus:!0,disabled:n}),e("p",{className:"text-sm text-gray-500 mt-1",children:"Enter your DSSN and approve the request on your mobile app"})]}),e("button",{type:"submit",disabled:n,className:`w-full py-3 px-4 rounded-md text-white font-semibold ${n?"bg-blue-400":"bg-blue-600 hover:bg-blue-700"} transition-colors flex items-center justify-center`,children:n?a(z,{children:[a("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify with DSSN"})]}),e("div",{className:"mt-4 text-center text-sm border-t border-gray-200 pt-4",children:a("p",{className:"text-gray-600",children:["Don't have the mobile app? ",e("a",{href:"#",className:"text-blue-600 hover:underline",children:"Download it here"})]})})]})]})})},R=()=>{const{user:s,logout:b}=I(),i=S(),[m]=o.useState(new Date),h=()=>{localStorage.removeItem("MOE_LOGGED_IN"),localStorage.removeItem("MOE_USERNAME"),localStorage.removeItem("MOE_GOV_TOKEN"),b(),i("/system")};if(o.useEffect(()=>{s||i("/system")},[s,i]),!s)return null;const d=j.filter(l=>l.requiredLevel<=s.securityLevel),n=l=>l.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e("div",{className:"min-h-screen bg-gray-100 p-6",children:a("div",{className:"max-w-6xl mx-auto",children:[a("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 flex justify-between items-center",children:[a("div",{children:[a("h1",{className:"text-2xl font-bold text-gray-800",children:["Welcome, ",s.username]}),e("p",{className:"text-gray-600",children:n(m)})]}),e("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Logout"})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(l=>e("div",{onClick:()=>i(l.path),className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:a("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600",children:e("span",{className:"text-xl",children:l.icon})}),a("div",{children:[e("h2",{className:"font-bold text-lg",children:l.title}),l.requiredLevel>=_.SCHOOL_ADMIN&&e("span",{className:"text-xs px-2 py-1 bg-blue-600 text-white rounded-full",children:getRoleName(l.requiredLevel).toUpperCase()})]})]})},l.id))})]})})},U=()=>{const s=S();return e("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full text-center",children:[e("div",{className:"text-red-500 mb-4",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Access Denied"}),e("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."}),e("button",{onClick:()=>s(-1),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Go Back"})]})})},V=()=>{const{user:s}=I(),b=O(),i=S(),[m,h]=o.useState(0),[d,n]=o.useState(!1);o.useEffect(()=>{const t=setInterval(()=>{h(r=>(r+1)%y.length)},600);return()=>clearInterval(t)},[]),o.useEffect(()=>{localStorage.getItem("MOE_LOGGED_IN")==="true"&&s?i("/moe-dashboard"):s||(localStorage.removeItem("MOE_LOGGED_IN"),localStorage.removeItem("MOE_USERNAME"),localStorage.removeItem("MOE_GOV_TOKEN"))},[s,i]);const l=async t=>{try{const r=JSON.parse(atob(t.split(".")[1]));localStorage.setItem("MOE_USER_ID",r.userId),localStorage.setItem("MOE_USERNAME","DSSN User"),localStorage.setItem("MOE_SECURITY_LEVEL","1"),localStorage.setItem("MOE_LOGGED_IN","true"),localStorage.setItem("MOE_GOV_TOKEN",t),n(!1),i("/moe-dashboard")}catch(r){console.error("Error processing DSSN login:",r),alert("Login failed. Please try again.")}},v=(t,r)=>{var u;r.stopPropagation(),t==="education"?s?i("/moe-dashboard"):n(!0):alert(`Services for ${(u=k.find(w=>w.id===t))==null?void 0:u.name} are coming soon`)},N=(t,r)=>{r.stopPropagation(),alert(`${t.replace("-"," ")} service will be available soon`)};return a("div",{className:"relative min-h-screen w-full bg-blue-950 text-white font-inter overflow-x-hidden",children:[e("div",{className:"fixed inset-0 bg-blue-950 -z-50"}),e("div",{className:"fixed inset-0 flex items-center justify-center z-10 pointer-events-none",children:e("div",{className:"relative w-full max-w-2xl mx-4 h-64 md:h-96 flex items-center justify-center",children:y.map((t,r)=>a("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-1000 ${r===m?"opacity-100":"opacity-0"}`,children:[e("img",{src:t,alt:`Logo ${r}`,className:"max-w-full max-h-full object-contain"}),e("div",{className:"absolute inset-0 bg-black/5"})]},r))})}),e("header",{className:"fixed top-0 left-0 w-full z-50",children:a("div",{className:"bg-blue-950/80 backdrop-blur-md border-b border-blue-700/30",children:[e("div",{className:"flex items-center justify-center px-4 py-4 max-w-7xl mx-auto",children:e("nav",{className:"flex space-x-2 md:space-x-4 overflow-x-auto w-full justify-center",children:A.map(t=>e("div",{className:`flex-shrink-0 ${t.color} px-3 py-1 rounded-lg`,children:e(L,{to:t.to,className:`text-sm md:text-base lg:text-lg font-bold transition-colors duration-300 ${b.pathname===t.to?"text-red-500":"text-white hover:text-blue-300"}`,children:t.label})},t.to))})}),e("div",{className:"w-full bg-gradient-to-b from-blue-950 to-transparent overflow-x-auto",children:e("div",{className:"flex flex-nowrap px-4 space-x-4 w-max max-w-full mx-auto py-3",children:y.map((t,r)=>e("div",{className:`flex-shrink-0 flex items-center justify-center p-2 rounded-lg transition-all duration-300 ${r===m?"scale-110 bg-white shadow-lg":"scale-100 bg-white/90"}`,style:{animation:r===m?"heartbeat 600ms ease-in-out":"none"},children:e("img",{src:t,alt:`Logo ${r}`,className:"w-12 h-12 md:w-16 md:h-16 object-contain"})},r))})})]})}),a("main",{className:"relative z-30 pt-48 pb-20 px-4 md:px-8",children:[e("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:a("div",{className:"bg-gradient-to-br from-rose-500/10 via-red-500/10 to-orange-600/10 backdrop-blur-lg rounded-xl border border-rose-400/30 p-6 md:p-8 shadow-lg relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-sm"}),a("div",{className:"relative",children:[e("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-white border-b border-white/20 pb-2",children:"Digital Social Security Number (DSSN)"}),a("div",{className:"text-white space-y-4",children:[e("p",{children:"In the Digital Liberia project, the DSSN (Digital Social Security Number) is a unique digital identifier assigned to every Liberian citizen or legal resident within the system."}),e(L,{to:"/dssn",className:"inline-flex items-center bg-blue-500/80 backdrop-blur-sm rounded-lg px-3 py-1 ml-2 border border-blue-400/30 cursor-pointer hover:bg-blue-600/80 transition-colors",children:"(click here to verify a DSSN)"})]})]})]})}),e("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:a("div",{className:"bg-gradient-to-br from-green-500/10 via-teal-500/10 to-emerald-600/10 backdrop-blur-lg rounded-xl border border-green-400/30 p-6 md:p-8 shadow-lg relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-sm"}),a("div",{className:"relative",children:[e("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-white border-b border-white/20 pb-2",children:"Digital Liberia System"}),e("div",{className:"text-white",children:e("p",{children:"The National Database Management System (NDMS) is the secure, centralized, and intelligent national data backbone that powers Digital Liberia."})})]})]})}),e("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:a("div",{className:"bg-gradient-to-br from-purple-500/10 via-indigo-500/10 to-blue-600/10 backdrop-blur-lg rounded-xl border border-purple-400/30 p-6 md:p-8 shadow-lg relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-sm"}),a("div",{className:"relative",children:[e("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-white border-b border-white/20 pb-2",children:"Government Ministries"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map(t=>e("div",{onClick:r=>v(t.id,r),className:"cursor-pointer bg-white/5 hover:bg-white/10 transition-colors p-4 rounded-lg border border-white/10 backdrop-blur-sm relative z-20",children:a("div",{className:"flex items-center space-x-4",children:[e("img",{src:t.icon,alt:t.name,className:"w-12 h-12 object-contain"}),a("div",{children:[e("h3",{className:"font-bold text-lg",children:t.name}),e("p",{className:"text-sm text-white/80",children:t.description})]})]})},t.id))})]})]})}),e("section",{className:"w-full py-8 px-4 md:px-8 max-w-4xl mx-auto mb-12",children:a("div",{className:"bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-blue-600/10 backdrop-blur-lg rounded-xl border border-blue-400/30 p-6 md:p-8 shadow-lg relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-sm"}),a("div",{className:"relative",children:[e("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-white border-b border-white/20 pb-2",children:"Quick Access Services"}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G.map(t=>e("button",{onClick:r=>N(t.id,r),className:"bg-white/5 hover:bg-white/10 transition-colors p-4 rounded-lg border border-white/10 backdrop-blur-sm text-left",children:e("h3",{className:"font-bold text-lg",children:t.name})},t.id))})]})]})})]}),e("footer",{className:"relative z-30 py-6 text-center text-white/60 text-sm",children:a("div",{className:"border-t border-blue-700/30 pt-6",children:["© ",new Date().getFullYear()," Digital Liberia. All rights reserved."]})}),d&&e(P,{onClose:()=>n(!1),onSuccess:l}),e("style",{jsx:!0,global:!0,children:`
        @keyframes heartbeat {
          0% { transform: scale(1); }
          25% { transform: scale(1.1); }
          50% { transform: scale(1); }
          75% { transform: scale(1.1); }
          100% { transform: scale(1); }
        }
        .overflow-x-auto {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        .overflow-x-auto::-webkit-scrollbar {
          display: none;
        }
      `})]})};export{R as MoeDashboard,U as UnauthorizedPage,V as default};
