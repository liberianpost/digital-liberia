{"version":3,"file":"DatabaseTools-3fd4f527.js","sources":["../../src/components/moe/DatabaseTools.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@context/AuthContext';\nimport { SecurityLevels } from '@utils/securityLevels';\nimport { hasPermission } from '@utils/auth';\n\nconst DatabaseTools = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const REQUIRED_SECURITY_LEVEL = SecurityLevels.DATABASE_ADMIN;\n\n  useEffect(() => {\n    if (!user || !hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      alert('Access denied. Requires DATABASE ADMIN privileges.');\n      navigate(-1);\n    }\n  }, [user, navigate]);\n\n  const handleMinistryManagement = () => {\n    if (hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      navigate('/moe/ministry-employee-management');\n    }\n  };\n\n  const handleSchoolAdminManagement = () => {\n    if (hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      navigate('/moe/school-admin-management');\n    }\n  };\n\n  const handleBackup = async () => {\n    if (hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      try {\n        await api.post('/database/backup');\n        alert('Database backup initiated successfully.');\n      } catch (error) {\n        console.error('Error initiating backup:', error);\n        alert('Failed to initiate database backup.');\n      }\n    }\n  };\n\n  const handleRestore = async () => {\n    if (hasPermission(REQUIRED_SECURITY_LEVEL, user?.securityLevel)) {\n      try {\n        await api.post('/database/restore');\n        alert('Database restore initiated successfully.');\n      } catch (error) {\n        console.error('Error initiating restore:', error);\n        alert('Failed to initiate database restore.');\n      }\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <div className=\"bg-white text-black p-4 shadow-md border-b border-gray-200\">\n        <div className=\"flex items-center justify-between max-w-7xl mx-auto\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate(-1)}\n              className=\"mr-4 text-black\"\n              aria-label=\"Go back\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                />\n              </svg>\n            </button>\n            <h1 className=\"text-xl font-bold\">Database Tools</h1>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"overflow-y-auto h-[calc(100vh-4rem)] p-4 max-w-3xl mx-auto\">\n        <div\n          onClick={handleMinistryManagement}\n          className=\"bg-white rounded-lg shadow-md mb-4 border border-gray-300 cursor-pointer hover:shadow-lg transition-shadow\"\n        >\n          <div className=\"p-4 text-center\">\n            <img\n              src=\"/logos/moe.png\"\n              alt=\"Ministry of Education icon\"\n              className=\"w-12 h-12 mx-auto object-contain\"\n            />\n            <h2 className=\"mt-2 text-lg font-bold text-black\">\n              Ministry of Education Management\n            </h2>\n            <p className=\"mt-2 text-gray-600 text-sm\">\n              Manage all ministry employees, add, delete, remove and suspend staff\n            </p>\n          </div>\n        </div>\n\n        <div\n          onClick={handleSchoolAdminManagement}\n          className=\"bg-white rounded-lg shadow-md mb-4 border border-gray-300 cursor-pointer hover:shadow-lg transition-shadow\"\n        >\n          <div className=\"p-4 text-center\">\n            <img\n              src=\"/logos/school.png\"\n              alt=\"School Administrators icon\"\n              className=\"w-12 h-12 mx-auto object-contain\"\n            />\n            <h2 className=\"mt-2 text-lg font-bold text-black\">\n              School Administrators Management\n            </h2>\n            <p className=\"mt-2 text-gray-600 text-sm\">\n              Manage school administrators by county, district and city\n            </p>\n          </div>\n        </div>\n\n        <h3 className=\"mt-6 text-base font-bold text-black\">Database Tools</h3>\n        <button\n          onClick={handleBackup}\n          className=\"w-full mt-4 py-3 px-4 border border-blue-600 text-blue-600 rounded-md hover:bg-blue-50 transition-colors text-center\"\n        >\n          Backup Database\n        </button>\n        <button\n          onClick={handleRestore}\n          className=\"w-full mt-2 py-3 px-4 border border-blue-600 text-blue-600 rounded-md hover:bg-blue-50 transition-colors text-center\"\n        >\n          Restore Database\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default DatabaseTools;\n"],"names":["DatabaseTools","user","useAuth","navigate","useNavigate","REQUIRED_SECURITY_LEVEL","SecurityLevels","DATABASE_ADMIN","useEffect","hasPermission","securityLevel","alert","jsxs","jsx","handleMinistryManagement","handleSchoolAdminManagement","api","post","error"],"mappings":"4IAMA,MAAMA,EAAgBA,IAAM,CACpB,KAAA,CAAEC,KAAAA,GAASC,EAAQ,EACnBC,EAAWC,IACXC,EAA0BC,EAAeC,eAE/CC,OAAAA,EAAAA,UAAU,IAAM,EACV,CAACP,GAAQ,CAACQ,EAAcJ,EAAyBJ,GAAAA,YAAAA,EAAMS,aAAa,KACtEC,MAAM,oDAAoD,EAC1DR,EAAS,EAAE,EACb,EACC,CAACF,EAAME,CAAQ,CAAC,EAuCjBS,EAAC,MAAI,CAAA,UAAU,wBACb,SAAA,CAACC,EAAA,MAAA,CAAI,UAAU,6DACb,SAACA,EAAA,MAAA,CAAI,UAAU,sDACb,SAAAD,EAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAC,EAAC,SACC,CAAA,QAAS,IAAMV,EAAS,EAAE,EAC1B,UAAU,kBACV,aAAW,UAEX,SAAAU,EAAC,MACC,CAAA,MAAM,6BACN,UAAU,UACV,KAAK,OACL,QAAQ,YACR,OAAO,eAEP,WAAC,OACC,CAAA,cAAc,QACd,eAAe,QACf,YAAa,EACb,EAAE,6BAA6B,CAAA,CAEnC,CAAA,EACF,EACCA,EAAA,KAAA,CAAG,UAAU,oBAAoB,SAAc,iBAAA,CAAA,CAClD,CAAA,CACF,CAAA,EACF,EAEAD,EAAC,MAAI,CAAA,UAAU,6DACb,SAAA,CAACC,EAAA,MAAA,CACC,QApEyBC,IAAM,CACjCL,EAAcJ,EAAyBJ,GAAAA,YAAAA,EAAMS,aAAa,GAC5DP,EAAS,mCAAmC,CAC9C,EAkEM,UAAU,6GAEV,SAACS,EAAA,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAC,OACC,IAAI,iBACJ,IAAI,6BACJ,UAAU,mCAAkC,EAE7CA,EAAA,KAAA,CAAG,UAAU,oCAAmC,SAEjD,mCAAA,EACCA,EAAA,IAAA,CAAE,UAAU,6BAA4B,SAEzC,uEAAA,CAAA,CAAA,CACF,CACF,CAAA,EAEAA,EAAC,OACC,QAjF4BE,IAAM,CACpCN,EAAcJ,EAAyBJ,GAAAA,YAAAA,EAAMS,aAAa,GAC5DP,EAAS,8BAA8B,CACzC,EA+EM,UAAU,6GAEV,SAAAS,EAAC,MAAI,CAAA,UAAU,kBACb,SAAA,CAAAC,EAAC,OACC,IAAI,oBACJ,IAAI,6BACJ,UAAU,mCAAkC,EAE7CA,EAAA,KAAA,CAAG,UAAU,oCAAmC,SAEjD,mCAAA,EACCA,EAAA,IAAA,CAAE,UAAU,6BAA4B,SAEzC,4DAAA,CAAA,CAAA,CACF,CACF,CAAA,EAECA,EAAA,KAAA,CAAG,UAAU,sCAAsC,SAAc,iBAAA,IACjE,SACC,CAAA,QA/Fa,SAAY,CAC/B,GAAIJ,EAAcJ,EAAyBJ,GAAAA,YAAAA,EAAMS,aAAa,EACxD,GAAA,CACIM,MAAAA,IAAIC,KAAK,kBAAkB,EACjCN,MAAM,yCAAyC,QACxCO,EAAO,CACNA,QAAAA,MAAM,2BAA4BA,CAAK,EAC/CP,MAAM,qCAAqC,CAC7C,CACF,EAuFM,UAAU,uHAAsH,SAGlI,kBAAA,IACC,SACC,CAAA,QAzFc,SAAY,CAChC,GAAIF,EAAcJ,EAAyBJ,GAAAA,YAAAA,EAAMS,aAAa,EACxD,GAAA,CACIM,MAAAA,IAAIC,KAAK,mBAAmB,EAClCN,MAAM,0CAA0C,QACzCO,EAAO,CACNA,QAAAA,MAAM,4BAA6BA,CAAK,EAChDP,MAAM,sCAAsC,CAC9C,CACF,EAiFM,UAAU,uHAAsH,SAGlI,mBAAA,CAAA,EACF,CACF,CAAA,CAAA,CAEJ"}