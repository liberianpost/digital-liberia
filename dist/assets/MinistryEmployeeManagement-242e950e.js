import{S as x,d as g,e as i,j as r,a as e}from"./auth-a5b058f6.js";import{e as u,r as c}from"./react-2658b102.js";import{u as w}from"./index-85a2de2e.js";import"./mui-cb74fc87.js";const k=()=>{const{user:t}=w(),a=u(),n=x.DATABASE_ADMIN,[o,d]=c.useState([]);c.useEffect(()=>{!t||!g(n,t==null?void 0:t.securityLevel)?(alert("Access denied. Requires DATABASE ADMIN privileges."),a(-1)):i.get("/employees").then(s=>d(s.data)).catch(s=>{console.error("Error fetching employees:",s),alert("Failed to load employees.")})},[t,a]);const m=async()=>{try{await i.post("/employees/add"),alert("Add New Employee feature initiated.")}catch(s){console.error("Error adding employee:",s),alert("Failed to initiate add employee.")}},h=async(s,l)=>{try{await i.post(`/employees/${s.id}/${l.toLowerCase()}`),alert(`${l} employee ${s.name} initiated.`)}catch(p){console.error(`Error performing ${l} on employee:`,p),alert(`Failed to ${l.toLowerCase()} employee ${s.name}.`)}};return r("div",{className:"min-h-screen bg-white",children:[e("div",{className:"bg-white text-black p-4 shadow-md border-b border-gray-200",children:e("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:r("div",{className:"flex items-center",children:[e("button",{onClick:()=>a(-1),className:"mr-4 text-black","aria-label":"Go back",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e("h1",{className:"text-xl font-bold",children:"Ministry Employees"})]})})}),r("div",{className:"p-4 max-w-3xl mx-auto",children:[r("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4",children:[e("h2",{className:"text-lg font-bold text-black",children:"Ministry Employee Management"}),e("p",{className:"mt-1 text-sm text-gray-600",children:"Manage all ministry employees"}),r("button",{onClick:m,className:"mt-4 w-full py-3 px-4 bg-blue-600 text-white rounded-md flex items-center justify-center hover:bg-blue-700 transition-colors",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Employee"]})]}),e("div",{className:"space-y-2",children:o.length===0?e("p",{className:"text-gray-500 text-center",children:"No employees available."}):o.map((s,l)=>e(y,{employee:s,onAction:h},l))})]})]})},y=({employee:t,onAction:a})=>{const n=o=>{switch(o.toLowerCase()){case"active":return"bg-green-500 text-white";case"suspended":return"bg-red-500 text-white";default:return"bg-gray-500 text-white"}};return r("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[r("div",{className:"flex items-center justify-between",children:[r("div",{className:"flex items-center",children:[e("img",{src:"/logos/person.png",alt:"Employee icon",className:"w-10 h-10 object-contain",onError:o=>{console.error("Failed to load employee icon"),o.target.src="https://via.placeholder.com/40?text=Person"}}),r("div",{className:"ml-4",children:[e("h3",{className:"text-base font-bold text-black",children:t.name}),e("p",{className:"text-sm text-gray-600",children:t.position})]})]}),e("span",{className:`px-2 py-1 text-xs rounded ${n(t.status)}`,children:t.status})]}),r("div",{className:"mt-4 flex space-x-2",children:[r("button",{onClick:()=>a(t,"Edit"),className:"flex-1 py-2 px-3 border border-gray-300 rounded-md text-black flex items-center justify-center hover:bg-gray-100 transition-colors",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),r("button",{onClick:()=>a(t,"Suspend"),className:"flex-1 py-2 px-3 border border-gray-300 rounded-md text-black flex items-center justify-center hover:bg-gray-100 transition-colors",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Suspend"]})]})]})};export{k as default};
//# sourceMappingURL=MinistryEmployeeManagement-242e950e.js.map
